import{w as ks,j as $,g as Fs,ae as Me,aR as Vs,f as M,aU as k,b as F,N as $s,aV as Oi,aW as Us,a0 as ze,a1 as ba,K as qs,a2 as Ai,a5 as xa,aX as Bs,a6 as ie,aY as js,U as Nt,ag as zs,al as Hs,ay as Ws,a4 as Xs,a8 as Qs,aj as Ks}from"./index-CeIe-P89.js";import{n as Ri,o as D,q as Zt,m as _e,b as Ke,s as Js,R as Ys,P as Zs}from"./App-BhD2WLvn.js";import{_ as St,b as tn,d as en,e as an}from"./objectWithoutProperties-Wd5xdGj4.js";import{c as $a,e as sn}from"./mapStyle-cDsFuGbO.js";import{A as nn,a as rn,b as on,T as ln,L as hn}from"./TimeReport-Dj_JMHYd.js";import"./CircularProgress-CAlegvK9.js";const un=ks($.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m.06 17v-2.01H12c-1.28 0-2.56-.49-3.54-1.46-1.71-1.71-1.92-4.35-.64-6.29l1.1 1.1c-.71 1.33-.53 3.01.59 4.13.7.7 1.62 1.03 2.54 1.01v-2.14l2.83 2.83zm4.11-4.24-1.1-1.1c.71-1.33.53-3.01-.59-4.13C13.79 8.84 12.9 8.5 12 8.5h-.06v2.15L9.11 7.83 11.94 5v2.02c1.3-.02 2.61.45 3.6 1.45 1.7 1.7 1.91 4.35.63 6.29"}),"ChangeCircle");var cn="Expected a function",Ua=NaN,fn="[object Symbol]",dn=/^\s+|\s+$/g,vn=/^[-+]0x[0-9a-f]+$/i,gn=/^0b[01]+$/i,mn=/^0o[0-7]+$/i,pn=parseInt,Mn=typeof Me=="object"&&Me&&Me.Object===Object&&Me,_n=typeof self=="object"&&self&&self.Object===Object&&self,yn=Mn||_n||Function("return this")(),Sn=Object.prototype,bn=Sn.toString,xn=Math.max,En=Math.min,Je=function(){return yn.Date.now()};function wn(t,e,a){var s,i,n,o,r,l,h=0,f=!1,u=!1,c=!0;if(typeof t!="function")throw new TypeError(cn);e=qa(e)||0,ha(a)&&(f=!!a.leading,u="maxWait"in a,n=u?xn(qa(a.maxWait)||0,e):n,c="trailing"in a?!!a.trailing:c);function d(x){var C=s,I=i;return s=i=void 0,h=x,o=t.apply(I,C),o}function g(x){return h=x,r=setTimeout(p,e),f?d(x):o}function v(x){var C=x-l,I=x-h,P=e-C;return u?En(P,n-I):P}function m(x){var C=x-l,I=x-h;return l===void 0||C>=e||C<0||u&&I>=n}function p(){var x=Je();if(m(x))return _(x);r=setTimeout(p,v(x))}function _(x){return r=void 0,c&&s?d(x):(s=i=void 0,o)}function y(){r!==void 0&&clearTimeout(r),h=0,s=l=i=r=void 0}function E(){return r===void 0?o:_(Je())}function w(){var x=Je(),C=m(x);if(s=arguments,i=this,l=x,C){if(r===void 0)return g(l);if(u)return r=setTimeout(p,e),d(l)}return r===void 0&&(r=setTimeout(p,e)),o}return w.cancel=y,w.flush=E,w}function ha(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Pn(t){return!!t&&typeof t=="object"}function Cn(t){return typeof t=="symbol"||Pn(t)&&bn.call(t)==fn}function qa(t){if(typeof t=="number")return t;if(Cn(t))return Ua;if(ha(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ha(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(dn,"");var a=gn.test(t);return a||mn.test(t)?pn(t.slice(2),a?2:8):vn.test(t)?Ua:+t}var In=wn;const Gn=Fs(In);function Re(t){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(t)}function Ni(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ni=function(){return!!t})()}function On(t,e){if(e&&(Ri(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vs(t)}function An(t){var e=Ni();return function(){var a,s=Re(t);if(e){var i=Re(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return On(this,a)}}function ua(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,s=Array(e);a<e;a++)s[a]=t[a];return s}function Rn(t){if(Array.isArray(t))return ua(t)}function Nn(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Li(t,e){if(t){if(typeof t=="string")return ua(t,e);var a={}.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ua(t,e):void 0}}function Ln(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ea(t){return Rn(t)||Nn(t)||Li(t)||Ln()}function Tn(t){if(Array.isArray(t))return t}function Dn(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,i,n,o,r=[],l=!0,h=!1;try{if(n=(a=a.call(t)).next,e===0){if(Object(a)!==a)return;l=!1}else for(;!(l=(s=n.call(a)).done)&&(r.push(s.value),r.length!==e);l=!0);}catch(f){h=!0,i=f}finally{try{if(!l&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(h)throw i}}return r}}function kn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tt(t,e){return Tn(t)||Dn(t,e)||Li(t,e)||kn()}function Fn(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const Vn=Math.min,$n=Math.max,Ne=Math.round,ye=Math.floor,Le=t=>({x:t,y:t});function Un(t){const{x:e,y:a,width:s,height:i}=t;return{width:s,height:i,top:a,left:e,right:e+s,bottom:a+i,x:e,y:a}}function He(){return typeof window<"u"}function Ti(t){return ki(t)?(t.nodeName||"").toLowerCase():"#document"}function xt(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Di(t){var e;return(e=(ki(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ki(t){return He()?t instanceof Node||t instanceof xt(t).Node:!1}function qn(t){return He()?t instanceof Element||t instanceof xt(t).Element:!1}function wa(t){return He()?t instanceof HTMLElement||t instanceof xt(t).HTMLElement:!1}function Ba(t){return!He()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof xt(t).ShadowRoot}const Bn=new Set(["inline","contents"]);function Fi(t){const{overflow:e,overflowX:a,overflowY:s,display:i}=Pa(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+a)&&!Bn.has(i)}function jn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const zn=new Set(["html","body","#document"]);function Hn(t){return zn.has(Ti(t))}function Pa(t){return xt(t).getComputedStyle(t)}function Wn(t){if(Ti(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ba(t)&&t.host||Di(t);return Ba(e)?e.host:e}function Vi(t){const e=Wn(t);return Hn(e)?t.ownerDocument?t.ownerDocument.body:t.body:wa(e)&&Fi(e)?e:Vi(e)}function Te(t,e,a){var s;e===void 0&&(e=[]),a===void 0&&(a=!0);const i=Vi(t),n=i===((s=t.ownerDocument)==null?void 0:s.body),o=xt(i);if(n){const r=ca(o);return e.concat(o,o.visualViewport||[],Fi(i)?i:[],r&&a?Te(r):[])}return e.concat(i,Te(i,[],a))}function ca(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Xn(t){const e=Pa(t);let a=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const i=wa(t),n=i?t.offsetWidth:a,o=i?t.offsetHeight:s,r=Ne(a)!==n||Ne(s)!==o;return r&&(a=n,s=o),{width:a,height:s,$:r}}function Ca(t){return qn(t)?t:t.contextElement}function ja(t){const e=Ca(t);if(!wa(e))return Le(1);const a=e.getBoundingClientRect(),{width:s,height:i,$:n}=Xn(e);let o=(n?Ne(a.width):a.width)/s,r=(n?Ne(a.height):a.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!r||!Number.isFinite(r))&&(r=1),{x:o,y:r}}const Qn=Le(0);function Kn(t){const e=xt(t);return!jn()||!e.visualViewport?Qn:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Jn(t,e,a){return!1}function za(t,e,a,s){e===void 0&&(e=!1);const i=t.getBoundingClientRect(),n=Ca(t);let o=Le(1);e&&(o=ja(t));const r=Jn()?Kn(n):Le(0);let l=(i.left+r.x)/o.x,h=(i.top+r.y)/o.y,f=i.width/o.x,u=i.height/o.y;if(n){const c=xt(n),d=s;let g=c,v=ca(g);for(;v&&s&&d!==g;){const m=ja(v),p=v.getBoundingClientRect(),_=Pa(v),y=p.left+(v.clientLeft+parseFloat(_.paddingLeft))*m.x,E=p.top+(v.clientTop+parseFloat(_.paddingTop))*m.y;l*=m.x,h*=m.y,f*=m.x,u*=m.y,l+=y,h+=E,g=xt(v),v=ca(g)}}return Un({width:f,height:u,x:l,y:h})}function $i(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Yn(t,e){let a=null,s;const i=Di(t);function n(){var r;clearTimeout(s),(r=a)==null||r.disconnect(),a=null}function o(r,l){r===void 0&&(r=!1),l===void 0&&(l=1),n();const h=t.getBoundingClientRect(),{left:f,top:u,width:c,height:d}=h;if(r||e(),!c||!d)return;const g=ye(u),v=ye(i.clientWidth-(f+c)),m=ye(i.clientHeight-(u+d)),p=ye(f),y={rootMargin:-g+"px "+-v+"px "+-m+"px "+-p+"px",threshold:$n(0,Vn(1,l))||1};let E=!0;function w(x){const C=x[0].intersectionRatio;if(C!==l){if(!E)return o();C?o(!1,C):s=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!$i(h,t.getBoundingClientRect())&&o(),E=!1}try{a=new IntersectionObserver(w,{...y,root:i.ownerDocument})}catch{a=new IntersectionObserver(w,y)}a.observe(t)}return o(!0),n}function Zn(t,e,a,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:n=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:r=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,h=Ca(t),f=i||n?[...h?Te(h):[],...Te(e)]:[];f.forEach(p=>{i&&p.addEventListener("scroll",a,{passive:!0}),n&&p.addEventListener("resize",a)});const u=h&&r?Yn(h,a):null;let c=-1,d=null;o&&(d=new ResizeObserver(p=>{let[_]=p;_&&_.target===h&&d&&(d.unobserve(e),cancelAnimationFrame(c),c=requestAnimationFrame(()=>{var y;(y=d)==null||y.observe(e)})),a()}),h&&!l&&d.observe(h),d.observe(e));let g,v=l?za(t):null;l&&m();function m(){const p=za(t);v&&!$i(v,p)&&a(),v=p,g=requestAnimationFrame(m)}return a(),()=>{var p;f.forEach(_=>{i&&_.removeEventListener("scroll",a),n&&_.removeEventListener("resize",a)}),u==null||u(),(p=d)==null||p.disconnect(),d=null,l&&cancelAnimationFrame(g)}}var fa=M.useLayoutEffect,tr=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],De=function(){};function er(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function ar(t,e){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i];var n=[].concat(s);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&n.push("".concat(er(t,o)));return n.filter(function(r){return r}).map(function(r){return String(r).trim()}).join(" ")}var Ha=function(e){return fr(e)?e.filter(Boolean):Ri(e)==="object"&&e!==null?[e]:[]},Ui=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var a=St(e,tr);return D({},a)},K=function(e,a,s){var i=e.cx,n=e.getStyles,o=e.getClassNames,r=e.className;return{css:n(a,e),className:i(s??{},o(a,e),r)}};function ir(t,e,a){if(a){var s=a(t,e);if(typeof s=="string")return s}return t}function We(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function sr(t){return We(t)?window.innerHeight:t.clientHeight}function qi(t){return We(t)?window.pageYOffset:t.scrollTop}function ke(t,e){if(We(t)){window.scrollTo(0,e);return}t.scrollTop=e}function nr(t){var e=getComputedStyle(t),a=e.position==="absolute",s=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(a&&e.position==="static")&&s.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function rr(t,e,a,s){return a*((t=t/s-1)*t*t+1)+e}function Se(t,e){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:De,i=qi(t),n=e-i,o=10,r=0;function l(){r+=o;var h=rr(r,i,n,a);ke(t,h),r<a?window.requestAnimationFrame(l):s(t)}l()}function Wa(t,e){var a=t.getBoundingClientRect(),s=e.getBoundingClientRect(),i=e.offsetHeight/3;s.bottom+i>a.bottom?ke(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):s.top-i<a.top&&ke(t,Math.max(e.offsetTop-i,0))}function or(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function Xa(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function lr(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var Bi=!1,hr={get passive(){return Bi=!0}},be=typeof window<"u"?window:{};be.addEventListener&&be.removeEventListener&&(be.addEventListener("p",De,hr),be.removeEventListener("p",De,!1));var ur=Bi;function cr(t){return t!=null}function fr(t){return Array.isArray(t)}function xe(t,e,a){return t?e:a}var dr=function(e){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var n=Object.entries(e).filter(function(o){var r=tt(o,1),l=r[0];return!s.includes(l)});return n.reduce(function(o,r){var l=tt(r,2),h=l[0],f=l[1];return o[h]=f,o},{})},vr=["children","innerProps"],gr=["children","innerProps"];function mr(t){var e=t.maxHeight,a=t.menuEl,s=t.minHeight,i=t.placement,n=t.shouldScroll,o=t.isFixedPosition,r=t.controlHeight,l=nr(a),h={placement:"bottom",maxHeight:e};if(!a||!a.offsetParent)return h;var f=l.getBoundingClientRect(),u=f.height,c=a.getBoundingClientRect(),d=c.bottom,g=c.height,v=c.top,m=a.offsetParent.getBoundingClientRect(),p=m.top,_=o?window.innerHeight:sr(l),y=qi(l),E=parseInt(getComputedStyle(a).marginBottom,10),w=parseInt(getComputedStyle(a).marginTop,10),x=p-w,C=_-v,I=x+y,P=u-y-v,L=d-_+y+E,V=y+v-w,b=160;switch(i){case"auto":case"bottom":if(C>=g)return{placement:"bottom",maxHeight:e};if(P>=g&&!o)return n&&Se(l,L,b),{placement:"bottom",maxHeight:e};if(!o&&P>=s||o&&C>=s){n&&Se(l,L,b);var O=o?C-E:P-E;return{placement:"bottom",maxHeight:O}}if(i==="auto"||o){var R=e,T=o?x:I;return T>=s&&(R=Math.min(T-E-r,e)),{placement:"top",maxHeight:R}}if(i==="bottom")return n&&ke(l,L),{placement:"bottom",maxHeight:e};break;case"top":if(x>=g)return{placement:"top",maxHeight:e};if(I>=g&&!o)return n&&Se(l,V,b),{placement:"top",maxHeight:e};if(!o&&I>=s||o&&x>=s){var N=e;return(!o&&I>=s||o&&x>=s)&&(N=o?x-w:I-w),n&&Se(l,V,b),{placement:"top",maxHeight:N}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return h}function pr(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var ji=function(e){return e==="auto"?"bottom":e},Mr=function(e,a){var s,i=e.placement,n=e.theme,o=n.borderRadius,r=n.spacing,l=n.colors;return D((s={label:"menu"},Zt(s,pr(i),"100%"),Zt(s,"position","absolute"),Zt(s,"width","100%"),Zt(s,"zIndex",1),s),a?{}:{backgroundColor:l.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:r.menuGutter,marginTop:r.menuGutter})},zi=M.createContext(null),_r=function(e){var a=e.children,s=e.minMenuHeight,i=e.maxMenuHeight,n=e.menuPlacement,o=e.menuPosition,r=e.menuShouldScrollIntoView,l=e.theme,h=M.useContext(zi)||{},f=h.setPortalPlacement,u=M.useRef(null),c=M.useState(i),d=tt(c,2),g=d[0],v=d[1],m=M.useState(null),p=tt(m,2),_=p[0],y=p[1],E=l.spacing.controlHeight;return fa(function(){var w=u.current;if(w){var x=o==="fixed",C=r&&!x,I=mr({maxHeight:i,menuEl:w,minHeight:s,placement:n,shouldScroll:C,isFixedPosition:x,controlHeight:E});v(I.maxHeight),y(I.placement),f==null||f(I.placement)}},[i,n,o,r,s,f,E]),a({ref:u,placerProps:D(D({},e),{},{placement:_||ji(n),maxHeight:g})})},yr=function(e){var a=e.children,s=e.innerRef,i=e.innerProps;return k("div",F({},K(e,"menu",{menu:!0}),{ref:s},i),a)},Sr=yr,br=function(e,a){var s=e.maxHeight,i=e.theme.spacing.baseUnit;return D({maxHeight:s,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},a?{}:{paddingBottom:i,paddingTop:i})},xr=function(e){var a=e.children,s=e.innerProps,i=e.innerRef,n=e.isMulti;return k("div",F({},K(e,"menuList",{"menu-list":!0,"menu-list--is-multi":n}),{ref:i},s),a)},Hi=function(e,a){var s=e.theme,i=s.spacing.baseUnit,n=s.colors;return D({textAlign:"center"},a?{}:{color:n.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},Er=Hi,wr=Hi,Pr=function(e){var a=e.children,s=a===void 0?"No options":a,i=e.innerProps,n=St(e,vr);return k("div",F({},K(D(D({},n),{},{children:s,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),s)},Cr=function(e){var a=e.children,s=a===void 0?"Loading...":a,i=e.innerProps,n=St(e,gr);return k("div",F({},K(D(D({},n),{},{children:s,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),s)},Ir=function(e){var a=e.rect,s=e.offset,i=e.position;return{left:a.left,position:i,top:s,width:a.width,zIndex:1}},Gr=function(e){var a=e.appendTo,s=e.children,i=e.controlElement,n=e.innerProps,o=e.menuPlacement,r=e.menuPosition,l=M.useRef(null),h=M.useRef(null),f=M.useState(ji(o)),u=tt(f,2),c=u[0],d=u[1],g=M.useMemo(function(){return{setPortalPlacement:d}},[]),v=M.useState(null),m=tt(v,2),p=m[0],_=m[1],y=M.useCallback(function(){if(i){var C=or(i),I=r==="fixed"?0:window.pageYOffset,P=C[c]+I;(P!==(p==null?void 0:p.offset)||C.left!==(p==null?void 0:p.rect.left)||C.width!==(p==null?void 0:p.rect.width))&&_({offset:P,rect:C})}},[i,r,c,p==null?void 0:p.offset,p==null?void 0:p.rect.left,p==null?void 0:p.rect.width]);fa(function(){y()},[y]);var E=M.useCallback(function(){typeof h.current=="function"&&(h.current(),h.current=null),i&&l.current&&(h.current=Zn(i,l.current,y,{elementResize:"ResizeObserver"in window}))},[i,y]);fa(function(){E()},[E]);var w=M.useCallback(function(C){l.current=C,E()},[E]);if(!a&&r!=="fixed"||!p)return null;var x=k("div",F({ref:w},K(D(D({},e),{},{offset:p.offset,position:r,rect:p.rect}),"menuPortal",{"menu-portal":!0}),n),s);return k(zi.Provider,{value:g},a?$s.createPortal(x,a):x)},Or=function(e){var a=e.isDisabled,s=e.isRtl;return{label:"container",direction:s?"rtl":void 0,pointerEvents:a?"none":void 0,position:"relative"}},Ar=function(e){var a=e.children,s=e.innerProps,i=e.isDisabled,n=e.isRtl;return k("div",F({},K(e,"container",{"--is-disabled":i,"--is-rtl":n}),s),a)},Rr=function(e,a){var s=e.theme.spacing,i=e.isMulti,n=e.hasValue,o=e.selectProps.controlShouldRenderValue;return D({alignItems:"center",display:i&&n&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},a?{}:{padding:"".concat(s.baseUnit/2,"px ").concat(s.baseUnit*2,"px")})},Nr=function(e){var a=e.children,s=e.innerProps,i=e.isMulti,n=e.hasValue;return k("div",F({},K(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":n}),s),a)},Lr=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Tr=function(e){var a=e.children,s=e.innerProps;return k("div",F({},K(e,"indicatorsContainer",{indicators:!0}),s),a)},Qa,Dr=["size"],kr=["innerProps","isRtl","size"],Fr={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Wi=function(e){var a=e.size,s=St(e,Dr);return k("svg",F({height:a,width:a,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Fr},s))},Ia=function(e){return k(Wi,F({size:20},e),k("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Xi=function(e){return k(Wi,F({size:20},e),k("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Qi=function(e,a){var s=e.isFocused,i=e.theme,n=i.spacing.baseUnit,o=i.colors;return D({label:"indicatorContainer",display:"flex",transition:"color 150ms"},a?{}:{color:s?o.neutral60:o.neutral20,padding:n*2,":hover":{color:s?o.neutral80:o.neutral40}})},Vr=Qi,$r=function(e){var a=e.children,s=e.innerProps;return k("div",F({},K(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),s),a||k(Xi,null))},Ur=Qi,qr=function(e){var a=e.children,s=e.innerProps;return k("div",F({},K(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),s),a||k(Ia,null))},Br=function(e,a){var s=e.isDisabled,i=e.theme,n=i.spacing.baseUnit,o=i.colors;return D({label:"indicatorSeparator",alignSelf:"stretch",width:1},a?{}:{backgroundColor:s?o.neutral10:o.neutral20,marginBottom:n*2,marginTop:n*2})},jr=function(e){var a=e.innerProps;return k("span",F({},a,K(e,"indicatorSeparator",{"indicator-separator":!0})))},zr=Us(Qa||(Qa=Fn([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Hr=function(e,a){var s=e.isFocused,i=e.size,n=e.theme,o=n.colors,r=n.spacing.baseUnit;return D({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},a?{}:{color:s?o.neutral60:o.neutral20,padding:r*2})},Ye=function(e){var a=e.delay,s=e.offset;return k("span",{css:Oi({animation:"".concat(zr," 1s ease-in-out ").concat(a,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Wr=function(e){var a=e.innerProps,s=e.isRtl,i=e.size,n=i===void 0?4:i,o=St(e,kr);return k("div",F({},K(D(D({},o),{},{innerProps:a,isRtl:s,size:n}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),a),k(Ye,{delay:0,offset:s}),k(Ye,{delay:160,offset:!0}),k(Ye,{delay:320,offset:!s}))},Xr=function(e,a){var s=e.isDisabled,i=e.isFocused,n=e.theme,o=n.colors,r=n.borderRadius,l=n.spacing;return D({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},a?{}:{backgroundColor:s?o.neutral5:o.neutral0,borderColor:s?o.neutral10:i?o.primary:o.neutral20,borderRadius:r,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:i?o.primary:o.neutral30}})},Qr=function(e){var a=e.children,s=e.isDisabled,i=e.isFocused,n=e.innerRef,o=e.innerProps,r=e.menuIsOpen;return k("div",F({ref:n},K(e,"control",{control:!0,"control--is-disabled":s,"control--is-focused":i,"control--menu-is-open":r}),o,{"aria-disabled":s||void 0}),a)},Kr=Qr,Jr=["data"],Yr=function(e,a){var s=e.theme.spacing;return a?{}:{paddingBottom:s.baseUnit*2,paddingTop:s.baseUnit*2}},Zr=function(e){var a=e.children,s=e.cx,i=e.getStyles,n=e.getClassNames,o=e.Heading,r=e.headingProps,l=e.innerProps,h=e.label,f=e.theme,u=e.selectProps;return k("div",F({},K(e,"group",{group:!0}),l),k(o,F({},r,{selectProps:u,theme:f,getStyles:i,getClassNames:n,cx:s}),h),k("div",null,a))},to=function(e,a){var s=e.theme,i=s.colors,n=s.spacing;return D({label:"group",cursor:"default",display:"block"},a?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:n.baseUnit*3,paddingRight:n.baseUnit*3,textTransform:"uppercase"})},eo=function(e){var a=Ui(e);a.data;var s=St(a,Jr);return k("div",F({},K(e,"groupHeading",{"group-heading":!0}),s))},ao=Zr,io=["innerRef","isDisabled","isHidden","inputClassName"],so=function(e,a){var s=e.isDisabled,i=e.value,n=e.theme,o=n.spacing,r=n.colors;return D(D({visibility:s?"hidden":"visible",transform:i?"translateZ(0)":""},no),a?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:r.neutral80})},Ki={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},no={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":D({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Ki)},ro=function(e){return D({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Ki)},oo=function(e){var a=e.cx,s=e.value,i=Ui(e),n=i.innerRef,o=i.isDisabled,r=i.isHidden,l=i.inputClassName,h=St(i,io);return k("div",F({},K(e,"input",{"input-container":!0}),{"data-value":s||""}),k("input",F({className:a({input:!0},l),ref:n,style:ro(r),disabled:o},h)))},lo=oo,ho=function(e,a){var s=e.theme,i=s.spacing,n=s.borderRadius,o=s.colors;return D({label:"multiValue",display:"flex",minWidth:0},a?{}:{backgroundColor:o.neutral10,borderRadius:n/2,margin:i.baseUnit/2})},uo=function(e,a){var s=e.theme,i=s.borderRadius,n=s.colors,o=e.cropWithEllipsis;return D({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},a?{}:{borderRadius:i/2,color:n.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},co=function(e,a){var s=e.theme,i=s.spacing,n=s.borderRadius,o=s.colors,r=e.isFocused;return D({alignItems:"center",display:"flex"},a?{}:{borderRadius:n/2,backgroundColor:r?o.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},Ji=function(e){var a=e.children,s=e.innerProps;return k("div",s,a)},fo=Ji,vo=Ji;function go(t){var e=t.children,a=t.innerProps;return k("div",F({role:"button"},a),e||k(Ia,{size:14}))}var mo=function(e){var a=e.children,s=e.components,i=e.data,n=e.innerProps,o=e.isDisabled,r=e.removeProps,l=e.selectProps,h=s.Container,f=s.Label,u=s.Remove;return k(h,{data:i,innerProps:D(D({},K(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),n),selectProps:l},k(f,{data:i,innerProps:D({},K(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},a),k(u,{data:i,innerProps:D(D({},K(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(a||"option")},r),selectProps:l}))},po=mo,Mo=function(e,a){var s=e.isDisabled,i=e.isFocused,n=e.isSelected,o=e.theme,r=o.spacing,l=o.colors;return D({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},a?{}:{backgroundColor:n?l.primary:i?l.primary25:"transparent",color:s?l.neutral20:n?l.neutral0:"inherit",padding:"".concat(r.baseUnit*2,"px ").concat(r.baseUnit*3,"px"),":active":{backgroundColor:s?void 0:n?l.primary:l.primary50}})},_o=function(e){var a=e.children,s=e.isDisabled,i=e.isFocused,n=e.isSelected,o=e.innerRef,r=e.innerProps;return k("div",F({},K(e,"option",{option:!0,"option--is-disabled":s,"option--is-focused":i,"option--is-selected":n}),{ref:o,"aria-disabled":s},r),a)},yo=_o,So=function(e,a){var s=e.theme,i=s.spacing,n=s.colors;return D({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},a?{}:{color:n.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},bo=function(e){var a=e.children,s=e.innerProps;return k("div",F({},K(e,"placeholder",{placeholder:!0}),s),a)},xo=bo,Eo=function(e,a){var s=e.isDisabled,i=e.theme,n=i.spacing,o=i.colors;return D({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},a?{}:{color:s?o.neutral40:o.neutral80,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},wo=function(e){var a=e.children,s=e.isDisabled,i=e.innerProps;return k("div",F({},K(e,"singleValue",{"single-value":!0,"single-value--is-disabled":s}),i),a)},Po=wo,Co={ClearIndicator:qr,Control:Kr,DropdownIndicator:$r,DownChevron:Xi,CrossIcon:Ia,Group:ao,GroupHeading:eo,IndicatorsContainer:Tr,IndicatorSeparator:jr,Input:lo,LoadingIndicator:Wr,Menu:Sr,MenuList:xr,MenuPortal:Gr,LoadingMessage:Cr,NoOptionsMessage:Pr,MultiValue:po,MultiValueContainer:fo,MultiValueLabel:vo,MultiValueRemove:go,Option:yo,Placeholder:xo,SelectContainer:Ar,SingleValue:Po,ValueContainer:Nr},Io=function(e){return D(D({},Co),e.components)},Ka=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Go(t,e){return!!(t===e||Ka(t)&&Ka(e))}function Oo(t,e){if(t.length!==e.length)return!1;for(var a=0;a<t.length;a++)if(!Go(t[a],e[a]))return!1;return!0}function Ao(t,e){e===void 0&&(e=Oo);var a=null;function s(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];if(a&&a.lastThis===this&&e(i,a.lastArgs))return a.lastResult;var o=t.apply(this,i);return a={lastResult:o,lastArgs:i,lastThis:this},o}return s.clear=function(){a=null},s}var Ro={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},No=function(e){return k("span",F({css:Ro},e))},Ja=No,Lo={guidance:function(e){var a=e.isSearchable,s=e.isMulti,i=e.tabSelectsValue,n=e.context,o=e.isInitialFocus;switch(n){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(a?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var a=e.action,s=e.label,i=s===void 0?"":s,n=e.labels,o=e.isDisabled;switch(a){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(n.length>1?"s":""," ").concat(n.join(","),", selected.");case"select-option":return o?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var a=e.context,s=e.focused,i=e.options,n=e.label,o=n===void 0?"":n,r=e.selectValue,l=e.isDisabled,h=e.isSelected,f=e.isAppleDevice,u=function(v,m){return v&&v.length?"".concat(v.indexOf(m)+1," of ").concat(v.length):""};if(a==="value"&&r)return"value ".concat(o," focused, ").concat(u(r,s),".");if(a==="menu"&&f){var c=l?" disabled":"",d="".concat(h?" selected":"").concat(c);return"".concat(o).concat(d,", ").concat(u(i,s),".")}return""},onFilter:function(e){var a=e.inputValue,s=e.resultsMessage;return"".concat(s).concat(a?" for search term "+a:"",".")}},To=function(e){var a=e.ariaSelection,s=e.focusedOption,i=e.focusedValue,n=e.focusableOptions,o=e.isFocused,r=e.selectValue,l=e.selectProps,h=e.id,f=e.isAppleDevice,u=l.ariaLiveMessages,c=l.getOptionLabel,d=l.inputValue,g=l.isMulti,v=l.isOptionDisabled,m=l.isSearchable,p=l.menuIsOpen,_=l.options,y=l.screenReaderStatus,E=l.tabSelectsValue,w=l.isLoading,x=l["aria-label"],C=l["aria-live"],I=M.useMemo(function(){return D(D({},Lo),u||{})},[u]),P=M.useMemo(function(){var T="";if(a&&I.onChange){var N=a.option,H=a.options,z=a.removedValue,W=a.removedValues,U=a.value,Y=function(et){return Array.isArray(et)?null:et},q=z||N||Y(U),X=q?c(q):"",Z=H||W||void 0,it=Z?Z.map(c):[],st=D({isDisabled:q&&v(q,r),label:X,labels:it},a);T=I.onChange(st)}return T},[a,I,v,r,c]),L=M.useMemo(function(){var T="",N=s||i,H=!!(s&&r&&r.includes(s));if(N&&I.onFocus){var z={focused:N,label:c(N),isDisabled:v(N,r),isSelected:H,options:n,context:N===s?"menu":"value",selectValue:r,isAppleDevice:f};T=I.onFocus(z)}return T},[s,i,c,v,I,n,r,f]),V=M.useMemo(function(){var T="";if(p&&_.length&&!w&&I.onFilter){var N=y({count:n.length});T=I.onFilter({inputValue:d,resultsMessage:N})}return T},[n,d,p,I,_,y,w]),b=(a==null?void 0:a.action)==="initial-input-focus",O=M.useMemo(function(){var T="";if(I.guidance){var N=i?"value":p?"menu":"input";T=I.guidance({"aria-label":x,context:N,isDisabled:s&&v(s,r),isMulti:g,isSearchable:m,tabSelectsValue:E,isInitialFocus:b})}return T},[x,s,i,g,v,m,p,I,r,E,b]),R=k(M.Fragment,null,k("span",{id:"aria-selection"},P),k("span",{id:"aria-focused"},L),k("span",{id:"aria-results"},V),k("span",{id:"aria-guidance"},O));return k(M.Fragment,null,k(Ja,{id:h},b&&R),k(Ja,{"aria-live":C,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!b&&R))},Do=To,da=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],ko=new RegExp("["+da.map(function(t){return t.letters}).join("")+"]","g"),Yi={};for(var Ze=0;Ze<da.length;Ze++)for(var ta=da[Ze],ea=0;ea<ta.letters.length;ea++)Yi[ta.letters[ea]]=ta.base;var Zi=function(e){return e.replace(ko,function(a){return Yi[a]})},Fo=Ao(Zi),Ya=function(e){return e.replace(/^\s+|\s+$/g,"")},Vo=function(e){return"".concat(e.label," ").concat(e.value)},$o=function(e){return function(a,s){if(a.data.__isNew__)return!0;var i=D({ignoreCase:!0,ignoreAccents:!0,stringify:Vo,trim:!0,matchFrom:"any"},e),n=i.ignoreCase,o=i.ignoreAccents,r=i.stringify,l=i.trim,h=i.matchFrom,f=l?Ya(s):s,u=l?Ya(r(a)):r(a);return n&&(f=f.toLowerCase(),u=u.toLowerCase()),o&&(f=Fo(f),u=Zi(u)),h==="start"?u.substr(0,f.length)===f:u.indexOf(f)>-1}},Uo=["innerRef"];function qo(t){var e=t.innerRef,a=St(t,Uo),s=dr(a,"onExited","in","enter","exit","appear");return k("input",F({ref:e},s,{css:Oi({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Bo=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function jo(t){var e=t.isEnabled,a=t.onBottomArrive,s=t.onBottomLeave,i=t.onTopArrive,n=t.onTopLeave,o=M.useRef(!1),r=M.useRef(!1),l=M.useRef(0),h=M.useRef(null),f=M.useCallback(function(m,p){if(h.current!==null){var _=h.current,y=_.scrollTop,E=_.scrollHeight,w=_.clientHeight,x=h.current,C=p>0,I=E-w-y,P=!1;I>p&&o.current&&(s&&s(m),o.current=!1),C&&r.current&&(n&&n(m),r.current=!1),C&&p>I?(a&&!o.current&&a(m),x.scrollTop=E,P=!0,o.current=!0):!C&&-p>y&&(i&&!r.current&&i(m),x.scrollTop=0,P=!0,r.current=!0),P&&Bo(m)}},[a,s,i,n]),u=M.useCallback(function(m){f(m,m.deltaY)},[f]),c=M.useCallback(function(m){l.current=m.changedTouches[0].clientY},[]),d=M.useCallback(function(m){var p=l.current-m.changedTouches[0].clientY;f(m,p)},[f]),g=M.useCallback(function(m){if(m){var p=ur?{passive:!1}:!1;m.addEventListener("wheel",u,p),m.addEventListener("touchstart",c,p),m.addEventListener("touchmove",d,p)}},[d,c,u]),v=M.useCallback(function(m){m&&(m.removeEventListener("wheel",u,!1),m.removeEventListener("touchstart",c,!1),m.removeEventListener("touchmove",d,!1))},[d,c,u]);return M.useEffect(function(){if(e){var m=h.current;return g(m),function(){v(m)}}},[e,g,v]),function(m){h.current=m}}var Za=["boxSizing","height","overflow","paddingRight","position"],ti={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function ei(t){t.cancelable&&t.preventDefault()}function ai(t){t.stopPropagation()}function ii(){var t=this.scrollTop,e=this.scrollHeight,a=t+this.offsetHeight;t===0?this.scrollTop=1:a===e&&(this.scrollTop=t-1)}function si(){return"ontouchstart"in window||navigator.maxTouchPoints}var ni=!!(typeof window<"u"&&window.document&&window.document.createElement),Jt=0,Ft={capture:!1,passive:!1};function zo(t){var e=t.isEnabled,a=t.accountForScrollbars,s=a===void 0?!0:a,i=M.useRef({}),n=M.useRef(null),o=M.useCallback(function(l){if(ni){var h=document.body,f=h&&h.style;if(s&&Za.forEach(function(g){var v=f&&f[g];i.current[g]=v}),s&&Jt<1){var u=parseInt(i.current.paddingRight,10)||0,c=document.body?document.body.clientWidth:0,d=window.innerWidth-c+u||0;Object.keys(ti).forEach(function(g){var v=ti[g];f&&(f[g]=v)}),f&&(f.paddingRight="".concat(d,"px"))}h&&si()&&(h.addEventListener("touchmove",ei,Ft),l&&(l.addEventListener("touchstart",ii,Ft),l.addEventListener("touchmove",ai,Ft))),Jt+=1}},[s]),r=M.useCallback(function(l){if(ni){var h=document.body,f=h&&h.style;Jt=Math.max(Jt-1,0),s&&Jt<1&&Za.forEach(function(u){var c=i.current[u];f&&(f[u]=c)}),h&&si()&&(h.removeEventListener("touchmove",ei,Ft),l&&(l.removeEventListener("touchstart",ii,Ft),l.removeEventListener("touchmove",ai,Ft)))}},[s]);return M.useEffect(function(){if(e){var l=n.current;return o(l),function(){r(l)}}},[e,o,r]),function(l){n.current=l}}var Ho=function(e){var a=e.target;return a.ownerDocument.activeElement&&a.ownerDocument.activeElement.blur()},Wo={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Xo(t){var e=t.children,a=t.lockEnabled,s=t.captureEnabled,i=s===void 0?!0:s,n=t.onBottomArrive,o=t.onBottomLeave,r=t.onTopArrive,l=t.onTopLeave,h=jo({isEnabled:i,onBottomArrive:n,onBottomLeave:o,onTopArrive:r,onTopLeave:l}),f=zo({isEnabled:a}),u=function(d){h(d),f(d)};return k(M.Fragment,null,a&&k("div",{onClick:Ho,css:Wo}),e(u))}var Qo={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Ko=function(e){var a=e.name,s=e.onFocus;return k("input",{required:!0,name:a,tabIndex:-1,"aria-hidden":"true",onFocus:s,css:Qo,value:"",onChange:function(){}})},Jo=Ko;function Ga(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Yo(){return Ga(/^iPhone/i)}function ts(){return Ga(/^Mac/i)}function Zo(){return Ga(/^iPad/i)||ts()&&navigator.maxTouchPoints>1}function tl(){return Yo()||Zo()}function el(){return ts()||tl()}var al=function(e){return e.label},il=function(e){return e.label},sl=function(e){return e.value},nl=function(e){return!!e.isDisabled},rl={clearIndicator:Ur,container:Or,control:Xr,dropdownIndicator:Vr,group:Yr,groupHeading:to,indicatorsContainer:Lr,indicatorSeparator:Br,input:so,loadingIndicator:Hr,loadingMessage:wr,menu:Mr,menuList:br,menuPortal:Ir,multiValue:ho,multiValueLabel:uo,multiValueRemove:co,noOptionsMessage:Er,option:Mo,placeholder:So,singleValue:Eo,valueContainer:Rr},ol={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},ll=4,es=4,hl=38,ul=es*2,cl={baseUnit:es,controlHeight:hl,menuGutter:ul},aa={borderRadius:ll,colors:ol,spacing:cl},fl={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Xa(),captureMenuScroll:!Xa(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:$o(),formatGroupLabel:al,getOptionLabel:il,getOptionValue:sl,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:nl,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!lr(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var a=e.count;return"".concat(a," result").concat(a!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function ri(t,e,a,s){var i=ss(t,e,a),n=ns(t,e,a),o=is(t,e),r=Fe(t,e);return{type:"option",data:e,isDisabled:i,isSelected:n,label:o,value:r,index:s}}function Ce(t,e){return t.options.map(function(a,s){if("options"in a){var i=a.options.map(function(o,r){return ri(t,o,e,r)}).filter(function(o){return li(t,o)});return i.length>0?{type:"group",data:a,options:i,index:s}:void 0}var n=ri(t,a,e,s);return li(t,n)?n:void 0}).filter(cr)}function as(t){return t.reduce(function(e,a){return a.type==="group"?e.push.apply(e,Ea(a.options.map(function(s){return s.data}))):e.push(a.data),e},[])}function oi(t,e){return t.reduce(function(a,s){return s.type==="group"?a.push.apply(a,Ea(s.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(s.index,"-").concat(i.index)}}))):a.push({data:s.data,id:"".concat(e,"-").concat(s.index)}),a},[])}function dl(t,e){return as(Ce(t,e))}function li(t,e){var a=t.inputValue,s=a===void 0?"":a,i=e.data,n=e.isSelected,o=e.label,r=e.value;return(!os(t)||!n)&&rs(t,{label:o,value:r,data:i},s)}function vl(t,e){var a=t.focusedValue,s=t.selectValue,i=s.indexOf(a);if(i>-1){var n=e.indexOf(a);if(n>-1)return a;if(i<e.length)return e[i]}return null}function gl(t,e){var a=t.focusedOption;return a&&e.indexOf(a)>-1?a:e[0]}var ia=function(e,a){var s,i=(s=e.find(function(n){return n.data===a}))===null||s===void 0?void 0:s.id;return i||null},is=function(e,a){return e.getOptionLabel(a)},Fe=function(e,a){return e.getOptionValue(a)};function ss(t,e,a){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,a):!1}function ns(t,e,a){if(a.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,a);var s=Fe(t,e);return a.some(function(i){return Fe(t,i)===s})}function rs(t,e,a){return t.filterOption?t.filterOption(e,a):!0}var os=function(e){var a=e.hideSelectedOptions,s=e.isMulti;return a===void 0?s:a},ml=1,ls=function(t){tn(a,t);var e=An(a);function a(s){var i;if(an(this,a),i=e.call(this,s),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,h){var f=i.props,u=f.onChange,c=f.name;h.name=c,i.ariaOnChange(l,h),u(l,h)},i.setValue=function(l,h,f){var u=i.props,c=u.closeMenuOnSelect,d=u.isMulti,g=u.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:g}),c&&(i.setState({inputIsHiddenAfterUpdate:!d}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:h,option:f})},i.selectOption=function(l){var h=i.props,f=h.blurInputOnSelect,u=h.isMulti,c=h.name,d=i.state.selectValue,g=u&&i.isOptionSelected(l,d),v=i.isOptionDisabled(l,d);if(g){var m=i.getOptionValue(l);i.setValue(d.filter(function(p){return i.getOptionValue(p)!==m}),"deselect-option",l)}else if(!v)u?i.setValue([].concat(Ea(d),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:c});return}f&&i.blurInput()},i.removeValue=function(l){var h=i.props.isMulti,f=i.state.selectValue,u=i.getOptionValue(l),c=f.filter(function(g){return i.getOptionValue(g)!==u}),d=xe(h,c,c[0]||null);i.onChange(d,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(xe(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,h=i.state.selectValue,f=h[h.length-1],u=h.slice(0,h.length-1),c=xe(l,u,u[0]||null);f&&i.onChange(c,{action:"pop-value",removedValue:f})},i.getFocusedOptionId=function(l){return ia(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return oi(Ce(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,h=new Array(l),f=0;f<l;f++)h[f]=arguments[f];return ar.apply(void 0,[i.props.classNamePrefix].concat(h))},i.getOptionLabel=function(l){return is(i.props,l)},i.getOptionValue=function(l){return Fe(i.props,l)},i.getStyles=function(l,h){var f=i.props.unstyled,u=rl[l](h,f);u.boxSizing="border-box";var c=i.props.styles[l];return c?c(u,h):u},i.getClassNames=function(l,h){var f,u;return(f=(u=i.props.classNames)[l])===null||f===void 0?void 0:f.call(u,h)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return Io(i.props)},i.buildCategorizedOptions=function(){return Ce(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return as(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,h){i.setState({ariaSelection:D({value:l},h)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var h=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():h&&i.openMenu("first"):(h&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var h=i.props,f=h.isMulti,u=h.menuIsOpen;i.focusInput(),u?(i.setState({inputIsHiddenAfterUpdate:!f}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&We(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var h=l.touches,f=h&&h.item(0);f&&(i.initialTouchX=f.clientX,i.initialTouchY=f.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var h=l.touches,f=h&&h.item(0);if(f){var u=Math.abs(f.clientX-i.initialTouchX),c=Math.abs(f.clientY-i.initialTouchY),d=5;i.userIsDragging=u>d||c>d}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var h=i.props.inputValue,f=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(f,{action:"input-change",prevInputValue:h}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var h=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:h}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var h=i.getFocusableOptions(),f=h.indexOf(l);i.setState({focusedOption:l,focusedOptionId:f>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return os(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var h=i.props,f=h.isMulti,u=h.backspaceRemovesValue,c=h.escapeClearsValue,d=h.inputValue,g=h.isClearable,v=h.isDisabled,m=h.menuIsOpen,p=h.onKeyDown,_=h.tabSelectsValue,y=h.openMenuOnFocus,E=i.state,w=E.focusedOption,x=E.focusedValue,C=E.selectValue;if(!v&&!(typeof p=="function"&&(p(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!f||d)return;i.focusValue("previous");break;case"ArrowRight":if(!f||d)return;i.focusValue("next");break;case"Delete":case"Backspace":if(d)return;if(x)i.removeValue(x);else{if(!u)return;f?i.popValue():g&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!m||!_||!w||y&&i.isOptionSelected(w,C))return;i.selectOption(w);break;case"Enter":if(l.keyCode===229)break;if(m){if(!w||i.isComposing)return;i.selectOption(w);break}return;case"Escape":m?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:d}),i.onMenuClose()):g&&c&&i.clearValue();break;case" ":if(d)return;if(!m){i.openMenu("first");break}if(!w)return;i.selectOption(w);break;case"ArrowUp":m?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":m?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!m)return;i.focusOption("pageup");break;case"PageDown":if(!m)return;i.focusOption("pagedown");break;case"Home":if(!m)return;i.focusOption("first");break;case"End":if(!m)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++ml),i.state.selectValue=Ha(s.value),s.menuIsOpen&&i.state.selectValue.length){var n=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),r=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=n,i.state.focusedOption=o[r],i.state.focusedOptionId=ia(n,o[r])}return i}return en(a,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Wa(this.menuListRef,this.focusedOptionRef),el()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var n=this.props,o=n.isDisabled,r=n.menuIsOpen,l=this.state.isFocused;(l&&!o&&i.isDisabled||l&&r&&!i.menuIsOpen)&&this.focusInput(),l&&o&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!o&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Wa(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,n){this.props.onInputChange(i,n)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var n=this,o=this.state,r=o.selectValue,l=o.isFocused,h=this.buildFocusableOptions(),f=i==="first"?0:h.length-1;if(!this.props.isMulti){var u=h.indexOf(r[0]);u>-1&&(f=u)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:h[f],focusedOptionId:this.getFocusedOptionId(h[f])},function(){return n.onMenuOpen()})}},{key:"focusValue",value:function(i){var n=this.state,o=n.selectValue,r=n.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=o.indexOf(r);r||(l=-1);var h=o.length-1,f=-1;if(o.length){switch(i){case"previous":l===0?f=0:l===-1?f=h:f=l-1;break;case"next":l>-1&&l<h&&(f=l+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:o[f]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",n=this.props.pageSize,o=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var l=0,h=r.indexOf(o);o||(h=-1),i==="up"?l=h>0?h-1:r.length-1:i==="down"?l=(h+1)%r.length:i==="pageup"?(l=h-n,l<0&&(l=0)):i==="pagedown"?(l=h+n,l>r.length-1&&(l=r.length-1)):i==="last"&&(l=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(r[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(aa):D(D({},aa),this.props.theme):aa}},{key:"getCommonProps",value:function(){var i=this.clearValue,n=this.cx,o=this.getStyles,r=this.getClassNames,l=this.getValue,h=this.selectOption,f=this.setValue,u=this.props,c=u.isMulti,d=u.isRtl,g=u.options,v=this.hasValue();return{clearValue:i,cx:n,getStyles:o,getClassNames:r,getValue:l,hasValue:v,isMulti:c,isRtl:d,options:g,selectOption:h,selectProps:u,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,n=i.isClearable,o=i.isMulti;return n===void 0?o:n}},{key:"isOptionDisabled",value:function(i,n){return ss(this.props,i,n)}},{key:"isOptionSelected",value:function(i,n){return ns(this.props,i,n)}},{key:"filterOption",value:function(i,n){return rs(this.props,i,n)}},{key:"formatOptionLabel",value:function(i,n){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(i,{context:n,inputValue:o,selectValue:r})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,n=i.isDisabled,o=i.isSearchable,r=i.inputId,l=i.inputValue,h=i.tabIndex,f=i.form,u=i.menuIsOpen,c=i.required,d=this.getComponents(),g=d.Input,v=this.state,m=v.inputIsHidden,p=v.ariaSelection,_=this.commonProps,y=r||this.getElementId("input"),E=D(D(D({"aria-autocomplete":"list","aria-expanded":u,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":c,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},u&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(p==null?void 0:p.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?M.createElement(g,F({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:y,innerRef:this.getInputRef,isDisabled:n,isHidden:m,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:h,form:f,type:"text",value:l},E)):M.createElement(qo,F({id:y,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:De,onFocus:this.onInputFocus,disabled:n,tabIndex:h,inputMode:"none",form:f,value:""},E))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,n=this.getComponents(),o=n.MultiValue,r=n.MultiValueContainer,l=n.MultiValueLabel,h=n.MultiValueRemove,f=n.SingleValue,u=n.Placeholder,c=this.commonProps,d=this.props,g=d.controlShouldRenderValue,v=d.isDisabled,m=d.isMulti,p=d.inputValue,_=d.placeholder,y=this.state,E=y.selectValue,w=y.focusedValue,x=y.isFocused;if(!this.hasValue()||!g)return p?null:M.createElement(u,F({},c,{key:"placeholder",isDisabled:v,isFocused:x,innerProps:{id:this.getElementId("placeholder")}}),_);if(m)return E.map(function(I,P){var L=I===w,V="".concat(i.getOptionLabel(I),"-").concat(i.getOptionValue(I));return M.createElement(o,F({},c,{components:{Container:r,Label:l,Remove:h},isFocused:L,isDisabled:v,key:V,index:P,removeProps:{onClick:function(){return i.removeValue(I)},onTouchEnd:function(){return i.removeValue(I)},onMouseDown:function(O){O.preventDefault()}},data:I}),i.formatOptionLabel(I,"value"))});if(p)return null;var C=E[0];return M.createElement(f,F({},c,{data:C,isDisabled:v}),this.formatOptionLabel(C,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),n=i.ClearIndicator,o=this.commonProps,r=this.props,l=r.isDisabled,h=r.isLoading,f=this.state.isFocused;if(!this.isClearable()||!n||l||!this.hasValue()||h)return null;var u={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return M.createElement(n,F({},o,{innerProps:u,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),n=i.LoadingIndicator,o=this.commonProps,r=this.props,l=r.isDisabled,h=r.isLoading,f=this.state.isFocused;if(!n||!h)return null;var u={"aria-hidden":"true"};return M.createElement(n,F({},o,{innerProps:u,isDisabled:l,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),n=i.DropdownIndicator,o=i.IndicatorSeparator;if(!n||!o)return null;var r=this.commonProps,l=this.props.isDisabled,h=this.state.isFocused;return M.createElement(o,F({},r,{isDisabled:l,isFocused:h}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),n=i.DropdownIndicator;if(!n)return null;var o=this.commonProps,r=this.props.isDisabled,l=this.state.isFocused,h={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return M.createElement(n,F({},o,{innerProps:h,isDisabled:r,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,n=this.getComponents(),o=n.Group,r=n.GroupHeading,l=n.Menu,h=n.MenuList,f=n.MenuPortal,u=n.LoadingMessage,c=n.NoOptionsMessage,d=n.Option,g=this.commonProps,v=this.state.focusedOption,m=this.props,p=m.captureMenuScroll,_=m.inputValue,y=m.isLoading,E=m.loadingMessage,w=m.minMenuHeight,x=m.maxMenuHeight,C=m.menuIsOpen,I=m.menuPlacement,P=m.menuPosition,L=m.menuPortalTarget,V=m.menuShouldBlockScroll,b=m.menuShouldScrollIntoView,O=m.noOptionsMessage,R=m.onMenuScrollToTop,T=m.onMenuScrollToBottom;if(!C)return null;var N=function(X,Z){var it=X.type,st=X.data,ft=X.isDisabled,et=X.isSelected,wt=X.label,gt=X.value,bt=v===st,Pt=ft?void 0:function(){return i.onOptionHover(st)},Qt=ft?void 0:function(){return i.selectOption(st)},nt="".concat(i.getElementId("option"),"-").concat(Z),Rt={id:nt,onClick:Qt,onMouseMove:Pt,onMouseOver:Pt,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:et};return M.createElement(d,F({},g,{innerProps:Rt,data:st,isDisabled:ft,isSelected:et,key:nt,label:wt,type:it,value:gt,isFocused:bt,innerRef:bt?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(X.data,"menu"))},H;if(this.hasOptions())H=this.getCategorizedOptions().map(function(q){if(q.type==="group"){var X=q.data,Z=q.options,it=q.index,st="".concat(i.getElementId("group"),"-").concat(it),ft="".concat(st,"-heading");return M.createElement(o,F({},g,{key:st,data:X,options:Z,Heading:r,headingProps:{id:ft,data:q.data},label:i.formatGroupLabel(q.data)}),q.options.map(function(et){return N(et,"".concat(it,"-").concat(et.index))}))}else if(q.type==="option")return N(q,"".concat(q.index))});else if(y){var z=E({inputValue:_});if(z===null)return null;H=M.createElement(u,g,z)}else{var W=O({inputValue:_});if(W===null)return null;H=M.createElement(c,g,W)}var U={minMenuHeight:w,maxMenuHeight:x,menuPlacement:I,menuPosition:P,menuShouldScrollIntoView:b},Y=M.createElement(_r,F({},g,U),function(q){var X=q.ref,Z=q.placerProps,it=Z.placement,st=Z.maxHeight;return M.createElement(l,F({},g,U,{innerRef:X,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:y,placement:it}),M.createElement(Xo,{captureEnabled:p,onTopArrive:R,onBottomArrive:T,lockEnabled:V},function(ft){return M.createElement(h,F({},g,{innerRef:function(wt){i.getMenuListRef(wt),ft(wt)},innerProps:{role:"listbox","aria-multiselectable":g.isMulti,id:i.getElementId("listbox")},isLoading:y,maxHeight:st,focusedOption:v}),H)}))});return L||P==="fixed"?M.createElement(f,F({},g,{appendTo:L,controlElement:this.controlRef,menuPlacement:I,menuPosition:P}),Y):Y}},{key:"renderFormField",value:function(){var i=this,n=this.props,o=n.delimiter,r=n.isDisabled,l=n.isMulti,h=n.name,f=n.required,u=this.state.selectValue;if(f&&!this.hasValue()&&!r)return M.createElement(Jo,{name:h,onFocus:this.onValueInputFocus});if(!(!h||r))if(l)if(o){var c=u.map(function(v){return i.getOptionValue(v)}).join(o);return M.createElement("input",{name:h,type:"hidden",value:c})}else{var d=u.length>0?u.map(function(v,m){return M.createElement("input",{key:"i-".concat(m),name:h,type:"hidden",value:i.getOptionValue(v)})}):M.createElement("input",{name:h,type:"hidden",value:""});return M.createElement("div",null,d)}else{var g=u[0]?this.getOptionValue(u[0]):"";return M.createElement("input",{name:h,type:"hidden",value:g})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,n=this.state,o=n.ariaSelection,r=n.focusedOption,l=n.focusedValue,h=n.isFocused,f=n.selectValue,u=this.getFocusableOptions();return M.createElement(Do,F({},i,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:r,focusedValue:l,isFocused:h,selectValue:f,focusableOptions:u,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),n=i.Control,o=i.IndicatorsContainer,r=i.SelectContainer,l=i.ValueContainer,h=this.props,f=h.className,u=h.id,c=h.isDisabled,d=h.menuIsOpen,g=this.state.isFocused,v=this.commonProps=this.getCommonProps();return M.createElement(r,F({},v,{className:f,innerProps:{id:u,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:g}),this.renderLiveRegion(),M.createElement(n,F({},v,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:g,menuIsOpen:d}),M.createElement(l,F({},v,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),M.createElement(o,F({},v,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,n){var o=n.prevProps,r=n.clearFocusValueOnUpdate,l=n.inputIsHiddenAfterUpdate,h=n.ariaSelection,f=n.isFocused,u=n.prevWasFocused,c=n.instancePrefix,d=i.options,g=i.value,v=i.menuIsOpen,m=i.inputValue,p=i.isMulti,_=Ha(g),y={};if(o&&(g!==o.value||d!==o.options||v!==o.menuIsOpen||m!==o.inputValue)){var E=v?dl(i,_):[],w=v?oi(Ce(i,_),"".concat(c,"-option")):[],x=r?vl(n,_):null,C=gl(n,E),I=ia(w,C);y={selectValue:_,focusedOption:C,focusedOptionId:I,focusableOptionsWithIds:w,focusedValue:x,clearFocusValueOnUpdate:!1}}var P=l!=null&&i!==o?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},L=h,V=f&&u;return f&&!V&&(L={value:xe(p,_,_[0]||null),options:_,action:"initial-input-focus"},V=!u),(h==null?void 0:h.action)==="initial-input-focus"&&(L=null),D(D(D({},y),P),{},{prevProps:i,ariaSelection:L,prevWasFocused:V})}}]),a}(M.Component);ls.defaultProps=fl;var pl=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Ml(t){var e=t.defaultInputValue,a=e===void 0?"":e,s=t.defaultMenuIsOpen,i=s===void 0?!1:s,n=t.defaultValue,o=n===void 0?null:n,r=t.inputValue,l=t.menuIsOpen,h=t.onChange,f=t.onInputChange,u=t.onMenuClose,c=t.onMenuOpen,d=t.value,g=St(t,pl),v=M.useState(r!==void 0?r:a),m=tt(v,2),p=m[0],_=m[1],y=M.useState(l!==void 0?l:i),E=tt(y,2),w=E[0],x=E[1],C=M.useState(d!==void 0?d:o),I=tt(C,2),P=I[0],L=I[1],V=M.useCallback(function(z,W){typeof h=="function"&&h(z,W),L(z)},[h]),b=M.useCallback(function(z,W){var U;typeof f=="function"&&(U=f(z,W)),_(U!==void 0?U:z)},[f]),O=M.useCallback(function(){typeof c=="function"&&c(),x(!0)},[c]),R=M.useCallback(function(){typeof u=="function"&&u(),x(!1)},[u]),T=r!==void 0?r:p,N=l!==void 0?l:w,H=d!==void 0?d:P;return D(D({},g),{},{inputValue:T,menuIsOpen:N,onChange:V,onInputChange:b,onMenuClose:R,onMenuOpen:O,value:H})}var _l=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function yl(t){var e=t.defaultOptions,a=e===void 0?!1:e,s=t.cacheOptions,i=s===void 0?!1:s,n=t.loadOptions;t.options;var o=t.isLoading,r=o===void 0?!1:o,l=t.onInputChange,h=t.filterOption,f=h===void 0?null:h,u=St(t,_l),c=u.inputValue,d=M.useRef(void 0),g=M.useRef(!1),v=M.useState(Array.isArray(a)?a:void 0),m=tt(v,2),p=m[0],_=m[1],y=M.useState(typeof c<"u"?c:""),E=tt(y,2),w=E[0],x=E[1],C=M.useState(a===!0),I=tt(C,2),P=I[0],L=I[1],V=M.useState(void 0),b=tt(V,2),O=b[0],R=b[1],T=M.useState([]),N=tt(T,2),H=N[0],z=N[1],W=M.useState(!1),U=tt(W,2),Y=U[0],q=U[1],X=M.useState({}),Z=tt(X,2),it=Z[0],st=Z[1],ft=M.useState(void 0),et=tt(ft,2),wt=et[0],gt=et[1],bt=M.useState(void 0),Pt=tt(bt,2),Qt=Pt[0],nt=Pt[1];i!==Qt&&(st({}),nt(i)),a!==wt&&(_(Array.isArray(a)?a:void 0),gt(a)),M.useEffect(function(){return g.current=!0,function(){g.current=!1}},[]);var Rt=M.useCallback(function(Kt,kt){if(!n)return kt();var dt=n(Kt,kt);dt&&typeof dt.then=="function"&&dt.then(kt,function(){return kt()})},[n]);M.useEffect(function(){a===!0&&Rt(w,function(Kt){g.current&&(_(Kt||[]),L(!!d.current))})},[]);var Ls=M.useCallback(function(Kt,kt){var dt=ir(Kt,kt,l);if(!dt){d.current=void 0,x(""),R(""),z([]),L(!1),q(!1);return}if(i&&it[dt])x(dt),R(dt),z(it[dt]),L(!1),q(!1);else{var Ds=d.current={};x(dt),L(!0),q(!O),Rt(dt,function(Qe){g&&Ds===d.current&&(d.current=void 0,L(!1),R(dt),z(Qe||[]),q(!1),st(Qe?D(D({},it),{},Zt({},dt,Qe)):it))})}},[i,Rt,O,it,l]),Ts=Y?[]:w&&O?H:p||[];return D(D({},u),{},{options:Ts,isLoading:P||r,onInputChange:Ls,filterOption:f})}var Sl=M.forwardRef(function(t,e){var a=yl(t),s=Ml(a);return M.createElement(ls,F({ref:e},s))}),bl=Sl;function xl(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var Tt=1,Dt=2,jt=3,El=4,va=5,hi=6378137,wl=6356752314e-3,ui=.0066943799901413165,se=484813681109536e-20,S=Math.PI/2,Pl=.16666666666666666,Cl=.04722222222222222,Il=.022156084656084655,G=1e-10,at=.017453292519943295,_t=57.29577951308232,B=Math.PI/4,he=Math.PI*2,J=3.14159265359,ct={};ct.greenwich=0;ct.lisbon=-9.131906111111;ct.paris=2.337229166667;ct.bogota=-74.080916666667;ct.madrid=-3.687938888889;ct.rome=12.452333333333;ct.bern=7.439583333333;ct.jakarta=106.807719444444;ct.ferro=-17.666666666667;ct.brussels=4.367975;ct.stockholm=18.058277777778;ct.athens=23.7163375;ct.oslo=10.722916666667;const Gl={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var ci=/[\s_\-\/\(\)]/g;function Gt(t,e){if(t[e])return t[e];for(var a=Object.keys(t),s=e.toLowerCase().replace(ci,""),i=-1,n,o;++i<a.length;)if(n=a[i],o=n.toLowerCase().replace(ci,""),o===s)return t[n]}function ga(t){var e={},a=t.split("+").map(function(r){return r.trim()}).filter(function(r){return r}).reduce(function(r,l){var h=l.split("=");return h.push(!0),r[h[0].toLowerCase()]=h[1],r},{}),s,i,n,o={proj:"projName",datum:"datumCode",rf:function(r){e.rf=parseFloat(r)},lat_0:function(r){e.lat0=r*at},lat_1:function(r){e.lat1=r*at},lat_2:function(r){e.lat2=r*at},lat_ts:function(r){e.lat_ts=r*at},lon_0:function(r){e.long0=r*at},lon_1:function(r){e.long1=r*at},lon_2:function(r){e.long2=r*at},alpha:function(r){e.alpha=parseFloat(r)*at},gamma:function(r){e.rectified_grid_angle=parseFloat(r)*at},lonc:function(r){e.longc=r*at},x_0:function(r){e.x0=parseFloat(r)},y_0:function(r){e.y0=parseFloat(r)},k_0:function(r){e.k0=parseFloat(r)},k:function(r){e.k0=parseFloat(r)},a:function(r){e.a=parseFloat(r)},b:function(r){e.b=parseFloat(r)},r:function(r){e.a=e.b=parseFloat(r)},r_a:function(){e.R_A=!0},zone:function(r){e.zone=parseInt(r,10)},south:function(){e.utmSouth=!0},towgs84:function(r){e.datum_params=r.split(",").map(function(l){return parseFloat(l)})},to_meter:function(r){e.to_meter=parseFloat(r)},units:function(r){e.units=r;var l=Gt(Gl,r);l&&(e.to_meter=l.to_meter)},from_greenwich:function(r){e.from_greenwich=r*at},pm:function(r){var l=Gt(ct,r);e.from_greenwich=(l||parseFloat(r))*at},nadgrids:function(r){r==="@null"?e.datumCode="none":e.nadgrids=r},axis:function(r){var l="ewnsud";r.length===3&&l.indexOf(r.substr(0,1))!==-1&&l.indexOf(r.substr(1,1))!==-1&&l.indexOf(r.substr(2,1))!==-1&&(e.axis=r)},approx:function(){e.approx=!0}};for(s in a)i=a[s],s in o?(n=o[s],typeof n=="function"?n(i):e[n]=i):e[s]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}class hs{static getId(e){const a=e.find(s=>Array.isArray(s)&&s[0]==="ID");return a&&a.length>=3?{authority:a[1],code:parseInt(a[2],10)}:null}static convertUnit(e,a="unit"){if(!e||e.length<3)return{type:a,name:"unknown",conversion_factor:null};const s=e[1],i=parseFloat(e[2])||null,n=e.find(r=>Array.isArray(r)&&r[0]==="ID"),o=n?{authority:n[1],code:parseInt(n[2],10)}:null;return{type:a,name:s,conversion_factor:i,id:o}}static convertAxis(e){const a=e[1]||"Unknown";let s;const i=a.match(/^\((.)\)$/);if(i){const h=i[1].toUpperCase();if(h==="E")s="east";else if(h==="N")s="north";else if(h==="U")s="up";else throw new Error(`Unknown axis abbreviation: ${h}`)}else s=e[2]?e[2].toLowerCase():"unknown";const n=e.find(h=>Array.isArray(h)&&h[0]==="ORDER"),o=n?parseInt(n[1],10):null,r=e.find(h=>Array.isArray(h)&&(h[0]==="LENGTHUNIT"||h[0]==="ANGLEUNIT"||h[0]==="SCALEUNIT")),l=this.convertUnit(r);return{name:a,direction:s,unit:l,order:o}}static extractAxes(e){return e.filter(a=>Array.isArray(a)&&a[0]==="AXIS").map(a=>this.convertAxis(a)).sort((a,s)=>(a.order||0)-(s.order||0))}static convert(e,a={}){switch(e[0]){case"PROJCRS":a.type="ProjectedCRS",a.name=e[1],a.base_crs=e.find(c=>Array.isArray(c)&&c[0]==="BASEGEOGCRS")?this.convert(e.find(c=>Array.isArray(c)&&c[0]==="BASEGEOGCRS")):null,a.conversion=e.find(c=>Array.isArray(c)&&c[0]==="CONVERSION")?this.convert(e.find(c=>Array.isArray(c)&&c[0]==="CONVERSION")):null;const s=e.find(c=>Array.isArray(c)&&c[0]==="CS");s&&(a.coordinate_system={type:s[1],axis:this.extractAxes(e)});const i=e.find(c=>Array.isArray(c)&&c[0]==="LENGTHUNIT");if(i){const c=this.convertUnit(i);a.coordinate_system.unit=c}a.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":a.type="GeographicCRS",a.name=e[1];const n=e.find(c=>Array.isArray(c)&&(c[0]==="DATUM"||c[0]==="ENSEMBLE"));if(n){const c=this.convert(n);n[0]==="ENSEMBLE"?a.datum_ensemble=c:a.datum=c;const d=e.find(g=>Array.isArray(g)&&g[0]==="PRIMEM");d&&d[1]!=="Greenwich"&&(c.prime_meridian={name:d[1],longitude:parseFloat(d[2])})}a.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},a.id=this.getId(e);break;case"DATUM":a.type="GeodeticReferenceFrame",a.name=e[1],a.ellipsoid=e.find(c=>Array.isArray(c)&&c[0]==="ELLIPSOID")?this.convert(e.find(c=>Array.isArray(c)&&c[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":a.type="DatumEnsemble",a.name=e[1],a.members=e.filter(c=>Array.isArray(c)&&c[0]==="MEMBER").map(c=>({type:"DatumEnsembleMember",name:c[1],id:this.getId(c)}));const o=e.find(c=>Array.isArray(c)&&c[0]==="ENSEMBLEACCURACY");o&&(a.accuracy=parseFloat(o[1]));const r=e.find(c=>Array.isArray(c)&&c[0]==="ELLIPSOID");r&&(a.ellipsoid=this.convert(r)),a.id=this.getId(e);break;case"ELLIPSOID":a.type="Ellipsoid",a.name=e[1],a.semi_major_axis=parseFloat(e[2]),a.inverse_flattening=parseFloat(e[3]),e.find(c=>Array.isArray(c)&&c[0]==="LENGTHUNIT")&&this.convert(e.find(c=>Array.isArray(c)&&c[0]==="LENGTHUNIT"),a);break;case"CONVERSION":a.type="Conversion",a.name=e[1],a.method=e.find(c=>Array.isArray(c)&&c[0]==="METHOD")?this.convert(e.find(c=>Array.isArray(c)&&c[0]==="METHOD")):null,a.parameters=e.filter(c=>Array.isArray(c)&&c[0]==="PARAMETER").map(c=>this.convert(c));break;case"METHOD":a.type="Method",a.name=e[1],a.id=this.getId(e);break;case"PARAMETER":a.type="Parameter",a.name=e[1],a.value=parseFloat(e[2]),a.unit=this.convertUnit(e.find(c=>Array.isArray(c)&&(c[0]==="LENGTHUNIT"||c[0]==="ANGLEUNIT"||c[0]==="SCALEUNIT"))),a.id=this.getId(e);break;case"BOUNDCRS":a.type="BoundCRS";const l=e.find(c=>Array.isArray(c)&&c[0]==="SOURCECRS");if(l){const c=l.find(d=>Array.isArray(d));a.source_crs=c?this.convert(c):null}const h=e.find(c=>Array.isArray(c)&&c[0]==="TARGETCRS");if(h){const c=h.find(d=>Array.isArray(d));a.target_crs=c?this.convert(c):null}const f=e.find(c=>Array.isArray(c)&&c[0]==="ABRIDGEDTRANSFORMATION");f?a.transformation=this.convert(f):a.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(a.type="Transformation",a.name=e[1],a.method=e.find(c=>Array.isArray(c)&&c[0]==="METHOD")?this.convert(e.find(c=>Array.isArray(c)&&c[0]==="METHOD")):null,a.parameters=e.filter(c=>Array.isArray(c)&&(c[0]==="PARAMETER"||c[0]==="PARAMETERFILE")).map(c=>{if(c[0]==="PARAMETER")return this.convert(c);if(c[0]==="PARAMETERFILE")return{name:c[1],value:c[2],id:{authority:"EPSG",code:8656}}}),a.parameters.length===7){const c=a.parameters[6];c.name==="Scale difference"&&(c.value=Math.round((c.value-1)*1e12)/1e6)}a.id=this.getId(e);break;case"AXIS":a.coordinate_system||(a.coordinate_system={type:"unspecified",axis:[]}),a.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const u=this.convertUnit(e,"LinearUnit");a.coordinate_system&&a.coordinate_system.axis&&a.coordinate_system.axis.forEach(c=>{c.unit||(c.unit=u)}),u.conversion_factor&&u.conversion_factor!==1&&a.semi_major_axis&&(a.semi_major_axis={value:a.semi_major_axis,unit:u});break;default:a.keyword=e[0];break}return a}}class Ol extends hs{static convert(e,a={}){return super.convert(e,a),a.coordinate_system&&a.coordinate_system.subtype==="Cartesian"&&delete a.coordinate_system,a.usage&&delete a.usage,a}}class Al extends hs{static convert(e,a={}){super.convert(e,a);const s=e.find(n=>Array.isArray(n)&&n[0]==="CS");s&&(a.coordinate_system={subtype:s[1],axis:this.extractAxes(e)});const i=e.find(n=>Array.isArray(n)&&n[0]==="USAGE");if(i){const n=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),o=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),r=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");a.usage={},n&&(a.usage.scope=n[1]),o&&(a.usage.area=o[1]),r&&(a.usage.bbox=r.slice(1))}return a}}function Rl(t){return t.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(t.find(e=>Array.isArray(e)&&e[0]==="CS")||t[0]==="BOUNDCRS"||t[0]==="PROJCRS"||t[0]==="GEOGCRS","2015")}function Nl(t){return(Rl(t)==="2019"?Al:Ol).convert(t)}function Ll(t){const e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var ue=1,us=2,cs=3,Ve=4,fs=5,Oa=-1,Tl=/\s/,Dl=/[A-Za-z]/,kl=/[A-Za-z84_]/,Xe=/[,\]]/,ds=/[\d\.E\-\+]/;function Et(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=ue}Et.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==Ve)for(;Tl.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case ue:return this.neutral(t);case us:return this.keyword(t);case Ve:return this.quoted(t);case fs:return this.afterquote(t);case cs:return this.number(t);case Oa:return}};Et.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=Ve;return}if(Xe.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Et.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=ue;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=ue,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Oa);return}};Et.prototype.number=function(t){if(ds.test(t)){this.word+=t;return}if(Xe.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Et.prototype.quoted=function(t){if(t==='"'){this.state=fs;return}this.word+=t};Et.prototype.keyword=function(t){if(kl.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=ue;return}if(Xe.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Et.prototype.neutral=function(t){if(Dl.test(t)){this.word=t,this.state=us;return}if(t==='"'){this.word="",this.state=Ve;return}if(ds.test(t)){this.word=t,this.state=cs;return}if(Xe.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Et.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Oa)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Fl(t){var e=new Et(t);return e.output()}function sa(t,e,a){Array.isArray(e)&&(a.unshift(e),e=null);var s=e?{}:t,i=a.reduce(function(n,o){return $t(o,n),n},s);e&&(t[e]=i)}function $t(t,e){if(!Array.isArray(t)){e[t]=!0;return}var a=t.shift();if(a==="PARAMETER"&&(a=t.shift()),t.length===1){if(Array.isArray(t[0])){e[a]={},$t(t[0],e[a]);return}e[a]=t[0];return}if(!t.length){e[a]=!0;return}if(a==="TOWGS84"){e[a]=t;return}if(a==="AXIS"){a in e||(e[a]=[]),e[a].push(t);return}Array.isArray(a)||(e[a]={});var s;switch(a){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[a]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&$t(t[2],e[a]);return;case"SPHEROID":case"ELLIPSOID":e[a]={name:t[0],a:t[1],rf:t[2]},t.length===4&&$t(t[3],e[a]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],sa(e,a,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],sa(e,a,t),e[a].type=a;return;default:for(s=-1;++s<t.length;)if(!Array.isArray(t[s]))return $t(t,e[a]);return sa(e,a,t)}}var Vl=.017453292519943295;function mt(t){return t*Vl}function vs(t){const e=(t.projName||"").toLowerCase().replace(/_/g," ");!t.long0&&t.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(t.lat0=mt(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1):!t.lat_ts&&t.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(t.lat_ts=t.lat0,t.lat0=mt(t.lat0>0?90:-90),delete t.lat1)}function fi(t){let e={units:null,to_meter:void 0};return typeof t=="string"?(e.units=t.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function di(t){return typeof t=="object"?t.value*t.unit.conversion_factor:t}function vi(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=di(t.ellipsoid.semi_major_axis),t.ellipsoid.inverse_flattening!==void 0?e.rf=t.ellipsoid.inverse_flattening:t.ellipsoid.semi_major_axis!==void 0&&t.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-di(t.ellipsoid.semi_minor_axis))))}function $e(t,e={}){return!t||typeof t!="object"?t:t.type==="BoundCRS"?($e(t.source_crs,e),t.transformation&&(t.transformation.method&&t.transformation.method.name==="NTv2"?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(a=>a.value)),e):(Object.keys(t).forEach(a=>{const s=t[a];if(s!==null)switch(a){case"name":if(e.srsCode)break;e.name=s,e.srsCode=s;break;case"type":s==="GeographicCRS"?e.projName="longlat":s==="ProjectedCRS"&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":s.ellipsoid&&(e.ellps=s.ellipsoid.name,vi(s,e)),s.prime_meridian&&(e.from_greenwich=s.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=s.name,vi(s,e);break;case"prime_meridian":e.long0=(s.longitude||0)*Math.PI/180;break;case"coordinate_system":if(s.axis){if(e.axis=s.axis.map(i=>{const n=i.direction;if(n==="east")return"e";if(n==="north")return"n";if(n==="west")return"w";if(n==="south")return"s";throw new Error(`Unknown axis direction: ${n}`)}).join("")+"u",s.unit){const{units:i,to_meter:n}=fi(s.unit);e.units=i,e.to_meter=n}else if(s.axis[0]&&s.axis[0].unit){const{units:i,to_meter:n}=fi(s.axis[0].unit);e.units=i,e.to_meter=n}}break;case"id":s.authority&&s.code&&(e.title=s.authority+":"+s.code);break;case"conversion":s.method&&s.method.name&&(e.projName=s.method.name),s.parameters&&s.parameters.forEach(i=>{const n=i.name.toLowerCase().replace(/\s+/g,"_"),o=i.value;i.unit&&i.unit.conversion_factor?e[n]=o*i.unit.conversion_factor:i.unit==="degree"?e[n]=o*Math.PI/180:e[n]=o});break;case"unit":s.name&&(e.units=s.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),s.conversion_factor&&(e.to_meter=s.conversion_factor);break;case"base_crs":$e(s,e),e.datumCode=s.id?s.id.authority+"_"+s.id.code:s.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),vs(e),e)}var $l=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Ul(t,e){var a=e[0],s=e[1];!(a in t)&&s in t&&(t[a]=t[s],e.length===3&&(t[a]=e[2](t[a])))}function gs(t){for(var e=Object.keys(t),a=0,s=e.length;a<s;++a){var i=e[a];$l.indexOf(i)!==-1&&ql(t[i]),typeof t[i]=="object"&&gs(t[i])}}function ql(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var a="",s=0,i=t.AXIS.length;s<i;++s){var n=[t.AXIS[s][0].toLowerCase(),t.AXIS[s][1].toLowerCase()];n[0].indexOf("north")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="north"?a+="n":n[0].indexOf("south")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="south"?a+="s":n[0].indexOf("east")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="east"?a+="e":(n[0].indexOf("west")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="west")&&(a+="w")}a.length===2&&(a+="u"),a.length===3&&(t.axis=a)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;t.type==="GEOGCS"&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=mt(t.rectified_grid_angle));function r(f){var u=t.to_meter||1;return f*u}var l=function(f){return Ul(t,f)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",mt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",mt],["x0","false_easting",r],["y0","false_northing",r],["long0","central_meridian",mt],["lat0","latitude_of_origin",mt],["lat0","standard_parallel_1",mt],["lat1","standard_parallel_1",mt],["lat2","standard_parallel_2",mt],["azimuth","Azimuth"],["alpha","azimuth",mt],["srsCode","name"]];h.forEach(l),vs(t)}function ma(t){if(typeof t=="object")return $e(t);const e=Ll(t);var a=Fl(t);if(e==="WKT2"){const n=Nl(a);return $e(n)}var s=a[0],i={};return $t(a,i),gs(i),i[s]}function ot(t){var e=this;if(arguments.length===2){var a=arguments[1];typeof a=="string"?a.charAt(0)==="+"?ot[t]=ga(arguments[1]):ot[t]=ma(arguments[1]):ot[t]=a}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(s){return Array.isArray(s)?ot.apply(e,s):ot(s)});if(typeof t=="string"){if(t in ot)return ot[t]}else"EPSG"in t?ot["EPSG:"+t.EPSG]=t:"ESRI"in t?ot["ESRI:"+t.ESRI]=t:"IAU2000"in t?ot["IAU2000:"+t.IAU2000]=t:console.log(t);return}}xl(ot);function Bl(t){return typeof t=="string"}function jl(t){return t in ot}function zl(t){return t.indexOf("+")!==0&&t.indexOf("[")!==-1||typeof t=="object"&&!("srsCode"in t)}var Hl=["3857","900913","3785","102113"];function Wl(t){var e=Gt(t,"authority");if(e){var a=Gt(e,"epsg");return a&&Hl.indexOf(a)>-1}}function Xl(t){var e=Gt(t,"extension");if(e)return Gt(e,"proj4")}function Ql(t){return t[0]==="+"}function Kl(t){if(Bl(t)){if(jl(t))return ot[t];if(zl(t)){var e=ma(t);if(Wl(e))return ot["EPSG:3857"];var a=Xl(e);return a?ga(a):e}if(Ql(t))return ga(t)}else return"projName"in t?t:ma(t)}function gi(t,e){t=t||{};var a,s;if(!e)return t;for(s in e)a=e[s],a!==void 0&&(t[s]=a);return t}function yt(t,e,a){var s=t*e;return a/Math.sqrt(1-s*s)}function de(t){return t<0?-1:1}function A(t){return Math.abs(t)<=J?t:t-de(t)*he}function pt(t,e,a){var s=t*a,i=.5*t;return s=Math.pow((1-s)/(1+s),i),Math.tan(.5*(S-e))/s}function ce(t,e){for(var a=.5*t,s,i,n=S-2*Math.atan(e),o=0;o<=15;o++)if(s=t*Math.sin(n),i=S-2*Math.atan(e*Math.pow((1-s)/(1+s),a))-n,n+=i,Math.abs(i)<=1e-10)return n;return-9999}function Jl(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=yt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Yl(t){var e=t.x,a=t.y;if(a*_t>90&&a*_t<-90&&e*_t>180&&e*_t<-180)return null;var s,i;if(Math.abs(Math.abs(a)-S)<=G)return null;if(this.sphere)s=this.x0+this.a*this.k0*A(e-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(B+.5*a));else{var n=Math.sin(a),o=pt(this.e,a,n);s=this.x0+this.a*this.k0*A(e-this.long0),i=this.y0-this.a*this.k0*Math.log(o)}return t.x=s,t.y=i,t}function Zl(t){var e=t.x-this.x0,a=t.y-this.y0,s,i;if(this.sphere)i=S-2*Math.atan(Math.exp(-a/(this.a*this.k0)));else{var n=Math.exp(-a/(this.a*this.k0));if(i=ce(this.e,n),i===-9999)return null}return s=A(this.long0+e/(this.a*this.k0)),t.x=s,t.y=i,t}var th=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const eh={init:Jl,forward:Yl,inverse:Zl,names:th};function ah(){}function mi(t){return t}var ih=["longlat","identity"];const sh={init:ah,forward:mi,inverse:mi,names:ih};var nh=[eh,sh],Lt={},Ut=[];function ms(t,e){var a=Ut.length;return t.names?(Ut[a]=t,t.names.forEach(function(s){Lt[s.toLowerCase()]=a}),this):(console.log(e),!0)}function ps(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function rh(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Lt[e]<"u"&&Ut[Lt[e]]||(e=ps(e),e in Lt&&Ut[Lt[e]]))return Ut[Lt[e]]}function oh(){nh.forEach(ms)}const lh={start:oh,add:ms,get:rh};var Ms={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const hh=Ms.WGS84;function uh(t,e,a,s){var i=t*t,n=e*e,o=(i-n)/i,r=0;s?(t*=1-o*(Pl+o*(Cl+o*Il)),i=t*t,o=0):r=Math.sqrt(o);var l=(i-n)/n;return{es:o,e:r,ep2:l}}function ch(t,e,a,s,i){if(!t){var n=Gt(Ms,s);n||(n=hh),t=n.a,e=n.b,a=n.rf}return a&&!e&&(e=(1-1/a)*t),(a===0||Math.abs(t-e)<G)&&(i=!0,e=t),{a:t,b:e,rf:a,sphere:i}}var Ie={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var fh in Ie){var na=Ie[fh];na.datumName&&(Ie[na.datumName]=na)}function dh(t,e,a,s,i,n,o){var r={};return t===void 0||t==="none"?r.datum_type=va:r.datum_type=El,e&&(r.datum_params=e.map(parseFloat),(r.datum_params[0]!==0||r.datum_params[1]!==0||r.datum_params[2]!==0)&&(r.datum_type=Tt),r.datum_params.length>3&&(r.datum_params[3]!==0||r.datum_params[4]!==0||r.datum_params[5]!==0||r.datum_params[6]!==0)&&(r.datum_type=Dt,r.datum_params[3]*=se,r.datum_params[4]*=se,r.datum_params[5]*=se,r.datum_params[6]=r.datum_params[6]/1e6+1)),o&&(r.datum_type=jt,r.grids=o),r.a=a,r.b=s,r.es=i,r.ep2=n,r}var Aa={};function vh(t,e,a){return e instanceof ArrayBuffer?gh(t,e,a):{ready:mh(t,e)}}function gh(t,e,a){var s=!0;a!==void 0&&a.includeErrorFields===!1&&(s=!1);var i=new DataView(e),n=_h(i),o=yh(i,n),r=Sh(i,o,n,s),l={header:o,subgrids:r};return Aa[t]=l,l}async function mh(t,e){for(var a=[],s=await e.getImageCount(),i=s-1;i>=0;i--){var n=await e.getImage(i),o=await n.readRasters(),r=o,l=[n.getWidth(),n.getHeight()],h=n.getBoundingBox().map(pi),f=[n.fileDirectory.ModelPixelScale[0],n.fileDirectory.ModelPixelScale[1]].map(pi),u=h[0]+(l[0]-1)*f[0],c=h[3]-(l[1]-1)*f[1],d=r[0],g=r[1],v=[];for(let _=l[1]-1;_>=0;_--)for(let y=l[0]-1;y>=0;y--){var m=_*l[0]+y;v.push([-Ct(g[m]),Ct(d[m])])}a.push({del:f,lim:l,ll:[-u,c],cvs:v})}var p={header:{nSubgrids:s},subgrids:a};return Aa[t]=p,p}function ph(t){if(t===void 0)return null;var e=t.split(",");return e.map(Mh)}function Mh(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Aa[t]||null,isNull:!1}}function pi(t){return t*Math.PI/180}function Ct(t){return t/3600*Math.PI/180}function _h(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function yh(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:pa(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function pa(t,e,a){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,a)))}function Sh(t,e,a,s){for(var i=176,n=[],o=0;o<e.nSubgrids;o++){var r=xh(t,i,a),l=Eh(t,i,r,a,s),h=Math.round(1+(r.upperLongitude-r.lowerLongitude)/r.longitudeInterval),f=Math.round(1+(r.upperLatitude-r.lowerLatitude)/r.latitudeInterval);n.push({ll:[Ct(r.lowerLongitude),Ct(r.lowerLatitude)],del:[Ct(r.longitudeInterval),Ct(r.latitudeInterval)],lim:[h,f],count:r.gridNodeCount,cvs:bh(l)});var u=16;s===!1&&(u=8),i+=176+r.gridNodeCount*u}return n}function bh(t){return t.map(function(e){return[Ct(e.longitudeShift),Ct(e.latitudeShift)]})}function xh(t,e,a){return{name:pa(t,e+8,e+16).trim(),parent:pa(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,a),upperLatitude:t.getFloat64(e+88,a),lowerLongitude:t.getFloat64(e+104,a),upperLongitude:t.getFloat64(e+120,a),latitudeInterval:t.getFloat64(e+136,a),longitudeInterval:t.getFloat64(e+152,a),gridNodeCount:t.getInt32(e+168,a)}}function Eh(t,e,a,s,i){var n=e+176,o=16;i===!1&&(o=8);for(var r=[],l=0;l<a.gridNodeCount;l++){var h={latitudeShift:t.getFloat32(n+l*o,s),longitudeShift:t.getFloat32(n+l*o+4,s)};i!==!1&&(h.latitudeAccuracy=t.getFloat32(n+l*o+8,s),h.longitudeAccuracy=t.getFloat32(n+l*o+12,s)),r.push(h)}return r}function Mt(t,e){if(!(this instanceof Mt))return new Mt(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(h){if(h)throw h};var a=Kl(t);if(typeof a!="object"){e("Could not parse to valid json: "+t);return}var s=Mt.projections.get(a.projName);if(!s){e("Could not get projection name from: "+t);return}if(a.datumCode&&a.datumCode!=="none"){var i=Gt(Ie,a.datumCode);i&&(a.datum_params=a.datum_params||(i.towgs84?i.towgs84.split(","):null),a.ellps=i.ellipse,a.datumName=i.datumName?i.datumName:a.datumCode)}a.k0=a.k0||1,a.axis=a.axis||"enu",a.ellps=a.ellps||"wgs84",a.lat1=a.lat1||a.lat0;var n=ch(a.a,a.b,a.rf,a.ellps,a.sphere),o=uh(n.a,n.b,n.rf,a.R_A),r=ph(a.nadgrids),l=a.datum||dh(a.datumCode,a.datum_params,n.a,n.b,o.es,o.ep2,r);gi(this,a),gi(this,s),this.a=n.a,this.b=n.b,this.rf=n.rf,this.sphere=n.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}Mt.projections=lh;Mt.projections.start();function wh(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===Tt?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===Dt?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function _s(t,e,a){var s=t.x,i=t.y,n=t.z?t.z:0,o,r,l,h;if(i<-S&&i>-1.001*S)i=-S;else if(i>S&&i<1.001*S)i=S;else{if(i<-S)return{x:-1/0,y:-1/0,z:t.z};if(i>S)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),r=Math.sin(i),h=Math.cos(i),l=r*r,o=a/Math.sqrt(1-e*l),{x:(o+n)*h*Math.cos(s),y:(o+n)*h*Math.sin(s),z:(o*(1-e)+n)*r}}function ys(t,e,a,s){var i=1e-12,n=i*i,o=30,r,l,h,f,u,c,d,g,v,m,p,_,y,E=t.x,w=t.y,x=t.z?t.z:0,C,I,P;if(r=Math.sqrt(E*E+w*w),l=Math.sqrt(E*E+w*w+x*x),r/a<i){if(C=0,l/a<i)return I=S,P=-s,{x:t.x,y:t.y,z:t.z}}else C=Math.atan2(w,E);h=x/l,f=r/l,u=1/Math.sqrt(1-e*(2-e)*f*f),g=f*(1-e)*u,v=h*u,y=0;do y++,d=a/Math.sqrt(1-e*v*v),P=r*g+x*v-d*(1-e*v*v),c=e*d/(d+P),u=1/Math.sqrt(1-c*(2-c)*f*f),m=f*(1-c)*u,p=h*u,_=p*g-m*v,g=m,v=p;while(_*_>n&&y<o);return I=Math.atan(p/Math.abs(m)),{x:C,y:I,z:P}}function Ph(t,e,a){if(e===Tt)return{x:t.x+a[0],y:t.y+a[1],z:t.z+a[2]};if(e===Dt){var s=a[0],i=a[1],n=a[2],o=a[3],r=a[4],l=a[5],h=a[6];return{x:h*(t.x-l*t.y+r*t.z)+s,y:h*(l*t.x+t.y-o*t.z)+i,z:h*(-r*t.x+o*t.y+t.z)+n}}}function Ch(t,e,a){if(e===Tt)return{x:t.x-a[0],y:t.y-a[1],z:t.z-a[2]};if(e===Dt){var s=a[0],i=a[1],n=a[2],o=a[3],r=a[4],l=a[5],h=a[6],f=(t.x-s)/h,u=(t.y-i)/h,c=(t.z-n)/h;return{x:f+l*u-r*c,y:-l*f+u+o*c,z:r*f-o*u+c}}}function Ee(t){return t===Tt||t===Dt}function Ih(t,e,a){if(wh(t,e)||t.datum_type===va||e.datum_type===va)return a;var s=t.a,i=t.es;if(t.datum_type===jt){var n=Mi(t,!1,a);if(n!==0)return;s=hi,i=ui}var o=e.a,r=e.b,l=e.es;if(e.datum_type===jt&&(o=hi,r=wl,l=ui),i===l&&s===o&&!Ee(t.datum_type)&&!Ee(e.datum_type))return a;if(a=_s(a,i,s),Ee(t.datum_type)&&(a=Ph(a,t.datum_type,t.datum_params)),Ee(e.datum_type)&&(a=Ch(a,e.datum_type,e.datum_params)),a=ys(a,l,o,r),e.datum_type===jt){var h=Mi(e,!0,a);if(h!==0)return}return a}function Mi(t,e,a){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var s={x:-a.x,y:a.y},i={x:Number.NaN,y:Number.NaN},n=[];t:for(var o=0;o<t.grids.length;o++){var r=t.grids[o];if(n.push(r.name),r.isNull){i=s;break}if(r.grid===null){if(r.mandatory)return console.log("Unable to find mandatory grid '"+r.name+"'"),-1;continue}for(var l=r.grid.subgrids,h=0,f=l.length;h<f;h++){var u=l[h],c=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,d=u.ll[0]-c,g=u.ll[1]-c,v=u.ll[0]+(u.lim[0]-1)*u.del[0]+c,m=u.ll[1]+(u.lim[1]-1)*u.del[1]+c;if(!(g>s.y||d>s.x||m<s.y||v<s.x)&&(i=Gh(s,e,u),!isNaN(i.x)))break t}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-s.x*_t+" "+s.y*_t+" tried: '"+n+"'"),-1):(a.x=-i.x,a.y=i.y,0)}function Gh(t,e,a){var s={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return s;var i={x:t.x,y:t.y};i.x-=a.ll[0],i.y-=a.ll[1],i.x=A(i.x-Math.PI)+Math.PI;var n=_i(i,a);if(e){if(isNaN(n.x))return s;n.x=i.x-n.x,n.y=i.y-n.y;var o=9,r=1e-12,l,h;do{if(h=_i(n,a),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(h.x+n.x),y:i.y-(h.y+n.y)},n.x+=l.x,n.y+=l.y}while(o--&&Math.abs(l.x)>r&&Math.abs(l.y)>r);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),s;s.x=A(n.x+a.ll[0]),s.y=n.y+a.ll[1]}else isNaN(n.x)||(s.x=t.x+n.x,s.y=t.y+n.y);return s}function _i(t,e){var a={x:t.x/e.del[0],y:t.y/e.del[1]},s={x:Math.floor(a.x),y:Math.floor(a.y)},i={x:a.x-1*s.x,y:a.y-1*s.y},n={x:Number.NaN,y:Number.NaN},o;if(s.x<0||s.x>=e.lim[0]||s.y<0||s.y>=e.lim[1])return n;o=s.y*e.lim[0]+s.x;var r={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var h={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var f={x:e.cvs[o][0],y:e.cvs[o][1]},u=i.x*i.y,c=i.x*(1-i.y),d=(1-i.x)*(1-i.y),g=(1-i.x)*i.y;return n.x=d*r.x+c*l.x+g*f.x+u*h.x,n.y=d*r.y+c*l.y+g*f.y+u*h.y,n}function yi(t,e,a){var s=a.x,i=a.y,n=a.z||0,o,r,l,h={};for(l=0;l<3;l++)if(!(e&&l===2&&a.z===void 0))switch(l===0?(o=s,"ew".indexOf(t.axis[l])!==-1?r="x":r="y"):l===1?(o=i,"ns".indexOf(t.axis[l])!==-1?r="y":r="x"):(o=n,r="z"),t.axis[l]){case"e":h[r]=o;break;case"w":h[r]=-o;break;case"n":h[r]=o;break;case"s":h[r]=-o;break;case"u":a[r]!==void 0&&(h.z=o);break;case"d":a[r]!==void 0&&(h.z=-o);break;default:return null}return h}function Ss(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Oh(t){Si(t.x),Si(t.y)}function Si(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Ah(t,e){return(t.datum.datum_type===Tt||t.datum.datum_type===Dt||t.datum.datum_type===jt)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Tt||e.datum.datum_type===Dt||e.datum.datum_type===jt)&&t.datumCode!=="WGS84"}function Ue(t,e,a,s){var i;Array.isArray(a)?a=Ss(a):a={x:a.x,y:a.y,z:a.z,m:a.m};var n=a.z!==void 0;if(Oh(a),t.datum&&e.datum&&Ah(t,e)&&(i=new Mt("WGS84"),a=Ue(t,i,a,s),t=i),s&&t.axis!=="enu"&&(a=yi(t,!1,a)),t.projName==="longlat")a={x:a.x*at,y:a.y*at,z:a.z||0};else if(t.to_meter&&(a={x:a.x*t.to_meter,y:a.y*t.to_meter,z:a.z||0}),a=t.inverse(a),!a)return;if(t.from_greenwich&&(a.x+=t.from_greenwich),a=Ih(t.datum,e.datum,a),!!a)return a=a,e.from_greenwich&&(a={x:a.x-e.from_greenwich,y:a.y,z:a.z||0}),e.projName==="longlat"?a={x:a.x*_t,y:a.y*_t,z:a.z||0}:(a=e.forward(a),e.to_meter&&(a={x:a.x/e.to_meter,y:a.y/e.to_meter,z:a.z||0})),s&&e.axis!=="enu"?yi(e,!0,a):(a&&!n&&delete a.z,a)}var bi=Mt("WGS84");function ra(t,e,a,s){var i,n,o;return Array.isArray(a)?(i=Ue(t,e,a,s)||{x:NaN,y:NaN},a.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(a.slice(3)):[i.x,i.y,a[2]].concat(a.slice(3)):[i.x,i.y].concat(a.slice(2)):[i.x,i.y]):(n=Ue(t,e,a,s),o=Object.keys(a),o.length===2||o.forEach(function(r){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(r==="x"||r==="y"||r==="z")return}else if(r==="x"||r==="y")return;n[r]=a[r]}),n)}function we(t){return t instanceof Mt?t:typeof t=="object"&&"oProj"in t?t.oProj:Mt(t)}function Rh(t,e,a){var s,i,n=!1,o;return typeof e>"u"?(i=we(t),s=bi,n=!0):(typeof e.x<"u"||Array.isArray(e))&&(a=e,i=we(t),s=bi,n=!0),s||(s=we(t)),i||(i=we(e)),a?ra(s,i,a):(o={forward:function(r,l){return ra(s,i,r,l)},inverse:function(r,l){return ra(i,s,r,l)}},n&&(o.oProj=i),o)}var xi=6,bs="AJSAJS",xs="AFAFAF",qt=65,ht=73,vt=79,te=86,ee=90;const Nh={forward:Es,inverse:Lh,toPoint:ws};function Es(t,e){return e=e||5,kh(Th({lat:t[1],lon:t[0]}),e)}function Lh(t){var e=Ra(Cs(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function ws(t){var e=Ra(Cs(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function oa(t){return t*(Math.PI/180)}function Ei(t){return 180*(t/Math.PI)}function Th(t){var e=t.lat,a=t.lon,s=6378137,i=.00669438,n=.9996,o,r,l,h,f,u,c,d=oa(e),g=oa(a),v,m;m=Math.floor((a+180)/6)+1,a===180&&(m=60),e>=56&&e<64&&a>=3&&a<12&&(m=32),e>=72&&e<84&&(a>=0&&a<9?m=31:a>=9&&a<21?m=33:a>=21&&a<33?m=35:a>=33&&a<42&&(m=37)),o=(m-1)*6-180+3,v=oa(o),r=i/(1-i),l=s/Math.sqrt(1-i*Math.sin(d)*Math.sin(d)),h=Math.tan(d)*Math.tan(d),f=r*Math.cos(d)*Math.cos(d),u=Math.cos(d)*(g-v),c=s*((1-i/4-3*i*i/64-5*i*i*i/256)*d-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*d)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*d)-35*i*i*i/3072*Math.sin(6*d));var p=n*l*(u+(1-h+f)*u*u*u/6+(5-18*h+h*h+72*f-58*r)*u*u*u*u*u/120)+5e5,_=n*(c+l*Math.tan(d)*(u*u/2+(5-h+9*f+4*f*f)*u*u*u*u/24+(61-58*h+h*h+600*f-330*r)*u*u*u*u*u*u/720));return e<0&&(_+=1e7),{northing:Math.round(_),easting:Math.round(p),zoneNumber:m,zoneLetter:Dh(e)}}function Ra(t){var e=t.northing,a=t.easting,s=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var n=.9996,o=6378137,r=.00669438,l,h=(1-Math.sqrt(1-r))/(1+Math.sqrt(1-r)),f,u,c,d,g,v,m,p,_,y=a-5e5,E=e;s<"N"&&(E-=1e7),m=(i-1)*6-180+3,l=r/(1-r),v=E/n,p=v/(o*(1-r/4-3*r*r/64-5*r*r*r/256)),_=p+(3*h/2-27*h*h*h/32)*Math.sin(2*p)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*p)+151*h*h*h/96*Math.sin(6*p),f=o/Math.sqrt(1-r*Math.sin(_)*Math.sin(_)),u=Math.tan(_)*Math.tan(_),c=l*Math.cos(_)*Math.cos(_),d=o*(1-r)/Math.pow(1-r*Math.sin(_)*Math.sin(_),1.5),g=y/(f*n);var w=_-f*Math.tan(_)/d*(g*g/2-(5+3*u+10*c-4*c*c-9*l)*g*g*g*g/24+(61+90*u+298*c+45*u*u-252*l-3*c*c)*g*g*g*g*g*g/720);w=Ei(w);var x=(g-(1+2*u+c)*g*g*g/6+(5-2*c+28*u-3*c*c+8*l+24*u*u)*g*g*g*g*g/120)/Math.cos(_);x=m+Ei(x);var C;if(t.accuracy){var I=Ra({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});C={top:I.lat,right:I.lon,bottom:w,left:x}}else C={lat:w,lon:x};return C}function Dh(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function kh(t,e){var a="00000"+t.easting,s="00000"+t.northing;return t.zoneNumber+t.zoneLetter+Fh(t.easting,t.northing,t.zoneNumber)+a.substr(a.length-5,e)+s.substr(s.length-5,e)}function Fh(t,e,a){var s=Ps(a),i=Math.floor(t/1e5),n=Math.floor(e/1e5)%20;return Vh(i,n,s)}function Ps(t){var e=t%xi;return e===0&&(e=xi),e}function Vh(t,e,a){var s=a-1,i=bs.charCodeAt(s),n=xs.charCodeAt(s),o=i+t-1,r=n+e,l=!1;o>ee&&(o=o-ee+qt-1,l=!0),(o===ht||i<ht&&o>ht||(o>ht||i<ht)&&l)&&o++,(o===vt||i<vt&&o>vt||(o>vt||i<vt)&&l)&&(o++,o===ht&&o++),o>ee&&(o=o-ee+qt-1),r>te?(r=r-te+qt-1,l=!0):l=!1,(r===ht||n<ht&&r>ht||(r>ht||n<ht)&&l)&&r++,(r===vt||n<vt&&r>vt||(r>vt||n<vt)&&l)&&(r++,r===ht&&r++),r>te&&(r=r-te+qt-1);var h=String.fromCharCode(o)+String.fromCharCode(r);return h}function Cs(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,a=null,s="",i,n=0;!/[A-Z]/.test(i=t.charAt(n));){if(n>=2)throw"MGRSPoint bad conversion from: "+t;s+=i,n++}var o=parseInt(s,10);if(n===0||n+3>e)throw"MGRSPoint bad conversion from: "+t;var r=t.charAt(n++);if(r<="A"||r==="B"||r==="Y"||r>="Z"||r==="I"||r==="O")throw"MGRSPoint zone letter "+r+" not handled: "+t;a=t.substring(n,n+=2);for(var l=Ps(o),h=$h(a.charAt(0),l),f=Uh(a.charAt(1),l);f<qh(r);)f+=2e6;var u=e-n;if(u%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var c=u/2,d=0,g=0,v,m,p,_,y;return c>0&&(v=1e5/Math.pow(10,c),m=t.substring(n,n+c),d=parseFloat(m)*v,p=t.substring(n+c),g=parseFloat(p)*v),_=d+h,y=g+f,{easting:_,northing:y,zoneLetter:r,zoneNumber:o,accuracy:v}}function $h(t,e){for(var a=bs.charCodeAt(e-1),s=1e5,i=!1;a!==t.charCodeAt(0);){if(a++,a===ht&&a++,a===vt&&a++,a>ee){if(i)throw"Bad character: "+t;a=qt,i=!0}s+=1e5}return s}function Uh(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var a=xs.charCodeAt(e-1),s=0,i=!1;a!==t.charCodeAt(0);){if(a++,a===ht&&a++,a===vt&&a++,a>te){if(i)throw"Bad character: "+t;a=qt,i=!0}s+=1e5}return s}function qh(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Wt(t,e,a){if(!(this instanceof Wt))return new Wt(t,e,a);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var s=t.split(",");this.x=parseFloat(s[0]),this.y=parseFloat(s[1]),this.z=parseFloat(s[2])||0}else this.x=t,this.y=e,this.z=a||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Wt.fromMGRS=function(t){return new Wt(ws(t))};Wt.prototype.toMGRS=function(t){return Es([this.x,this.y],t)};var Bh=1,jh=.25,wi=.046875,Pi=.01953125,Ci=.01068115234375,zh=.75,Hh=.46875,Wh=.013020833333333334,Xh=.007120768229166667,Qh=.3645833333333333,Kh=.005696614583333333,Jh=.3076171875;function Na(t){var e=[];e[0]=Bh-t*(jh+t*(wi+t*(Pi+t*Ci))),e[1]=t*(zh-t*(wi+t*(Pi+t*Ci)));var a=t*t;return e[2]=a*(Hh-t*(Wh+t*Xh)),a*=t,e[3]=a*(Qh-t*Kh),e[4]=a*t*Jh,e}function Xt(t,e,a,s){return a*=e,e*=e,s[0]*t-a*(s[1]+e*(s[2]+e*(s[3]+e*s[4])))}var Yh=20;function La(t,e,a){for(var s=1/(1-e),i=t,n=Yh;n;--n){var o=Math.sin(i),r=1-e*o*o;if(r=(Xt(i,o,Math.cos(i),a)-t)*(r*Math.sqrt(r))*s,i-=r,Math.abs(r)<G)return i}return i}function Zh(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Na(this.es),this.ml0=Xt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function tu(t){var e=t.x,a=t.y,s=A(e-this.long0),i,n,o,r=Math.sin(a),l=Math.cos(a);if(this.es){var f=l*s,u=Math.pow(f,2),c=this.ep2*Math.pow(l,2),d=Math.pow(c,2),g=Math.abs(l)>G?Math.tan(a):0,v=Math.pow(g,2),m=Math.pow(v,2);i=1-this.es*Math.pow(r,2),f=f/Math.sqrt(i);var p=Xt(a,r,l,this.en);n=this.a*(this.k0*f*(1+u/6*(1-v+c+u/20*(5-18*v+m+14*c-58*v*c+u/42*(61+179*m-m*v-479*v)))))+this.x0,o=this.a*(this.k0*(p-this.ml0+r*s*f/2*(1+u/12*(5-v+9*c+4*d+u/30*(61+m-58*v+270*c-330*v*c+u/56*(1385+543*m-m*v-3111*v))))))+this.y0}else{var h=l*Math.sin(s);if(Math.abs(Math.abs(h)-1)<G)return 93;if(n=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,o=l*Math.cos(s)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(o),h>=1){if(h-1>G)return 93;o=0}else o=Math.acos(o);a<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=n,t.y=o,t}function eu(t){var e,a,s,i,n=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,a=La(e,this.es,this.en),Math.abs(a)<S){var u=Math.sin(a),c=Math.cos(a),d=Math.abs(c)>G?Math.tan(a):0,g=this.ep2*Math.pow(c,2),v=Math.pow(g,2),m=Math.pow(d,2),p=Math.pow(m,2);e=1-this.es*Math.pow(u,2);var _=n*Math.sqrt(e)/this.k0,y=Math.pow(_,2);e=e*d,s=a-e*y/(1-this.es)*.5*(1-y/12*(5+3*m-9*g*m+g-4*v-y/30*(61+90*m-252*g*m+45*p+46*g-y/56*(1385+3633*m+4095*p+1574*p*m)))),i=A(this.long0+_*(1-y/6*(1+2*m+g-y/20*(5+28*m+24*p+8*g*m+6*g-y/42*(61+662*m+1320*p+720*p*m))))/c)}else s=S*de(o),i=0;else{var r=Math.exp(n/this.k0),l=.5*(r-1/r),h=this.lat0+o/this.k0,f=Math.cos(h);e=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(l,2))),s=Math.asin(e),o<0&&(s=-s),l===0&&f===0?i=0:i=A(Math.atan2(l,f)+this.long0)}return t.x=i,t.y=s,t}var au=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Ge={init:Zh,forward:tu,inverse:eu,names:au};function Is(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function ut(t,e){t=Math.abs(t),e=Math.abs(e);var a=Math.max(t,e),s=Math.min(t,e)/(a||1);return a*Math.sqrt(1+Math.pow(s,2))}function iu(t){var e=1+t,a=e-1;return a===0?t:t*Math.log(e)/a}function su(t){var e=Math.abs(t);return e=iu(e*(1+e/(ut(1,e)+1))),t<0?-e:e}function Ta(t,e){for(var a=2*Math.cos(2*e),s=t.length-1,i=t[s],n=0,o;--s>=0;)o=-n+a*i+t[s],n=i,i=o;return e+o*Math.sin(2*e)}function nu(t,e){for(var a=2*Math.cos(e),s=t.length-1,i=t[s],n=0,o;--s>=0;)o=-n+a*i+t[s],n=i,i=o;return Math.sin(e)*o}function ru(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function Gs(t,e,a){for(var s=Math.sin(e),i=Math.cos(e),n=Is(a),o=ru(a),r=2*i*o,l=-2*s*n,h=t.length-1,f=t[h],u=0,c=0,d=0,g,v;--h>=0;)g=c,v=u,c=f,u=d,f=-g+r*c-l*u+t[h],d=-v+l*c+r*u;return r=s*o,l=i*n,[r*f-l*d,r*d+l*f]}function ou(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ge.init.apply(this),this.forward=Ge.forward,this.inverse=Ge.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),a=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),a=a*e,this.cgb[1]=a*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=a*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),a=a*e,this.cgb[2]=a*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=a*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),a=a*e,this.cgb[3]=a*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=a*(1237/630+e*(-12/5+e*(-24832/14175))),a=a*e,this.cgb[4]=a*(4174/315+e*(-144838/6237)),this.cbg[4]=a*(-734/315+e*(109598/31185)),a=a*e,this.cgb[5]=a*(601676/22275),this.cbg[5]=a*(444337/155925),a=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+a*(1/4+a*(1/64+a/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=a*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=a*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),a=a*e,this.utg[2]=a*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=a*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),a=a*e,this.utg[3]=a*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=a*(49561/161280+e*(-179/168+e*(6601661/7257600))),a=a*e,this.utg[4]=a*(-4583/161280+e*(108847/3991680)),this.gtu[4]=a*(34729/80640+e*(-3418889/1995840)),a=a*e,this.utg[5]=a*(-20648693/638668800),this.gtu[5]=a*(212378941/319334400);var s=Ta(this.cbg,this.lat0);this.Zb=-this.Qn*(s+nu(this.gtu,2*s))}function lu(t){var e=A(t.x-this.long0),a=t.y;a=Ta(this.cbg,a);var s=Math.sin(a),i=Math.cos(a),n=Math.sin(e),o=Math.cos(e);a=Math.atan2(s,o*i),e=Math.atan2(n*i,ut(s,i*o)),e=su(Math.tan(e));var r=Gs(this.gtu,2*a,2*e);a=a+r[0],e=e+r[1];var l,h;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*a+this.Zb)+this.y0):(l=1/0,h=1/0),t.x=l,t.y=h,t}function hu(t){var e=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);a=(a-this.Zb)/this.Qn,e=e/this.Qn;var s,i;if(Math.abs(e)<=2.623395162778){var n=Gs(this.utg,2*a,2*e);a=a+n[0],e=e+n[1],e=Math.atan(Is(e));var o=Math.sin(a),r=Math.cos(a),l=Math.sin(e),h=Math.cos(e);a=Math.atan2(o*h,ut(l,h*r)),e=Math.atan2(l,h*r),s=A(e+this.long0),i=Ta(this.cgb,a)}else s=1/0,i=1/0;return t.x=s,t.y=i,t}var uu=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Oe={init:ou,forward:lu,inverse:hu,names:uu};function cu(t,e){if(t===void 0){if(t=Math.floor((A(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var fu="etmerc";function du(){var t=cu(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*at,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Oe.init.apply(this),this.forward=Oe.forward,this.inverse=Oe.inverse}var vu=["Universal Transverse Mercator System","utm"];const gu={init:du,names:vu,dependsOn:fu};function Da(t,e){return Math.pow((1-t)/(1+t),e)}var mu=20;function pu(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+B)/(Math.pow(Math.tan(.5*this.lat0+B),this.C)*Da(this.e*t,this.ratexp))}function Mu(t){var e=t.x,a=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*a+B),this.C)*Da(this.e*Math.sin(a),this.ratexp))-S,t.x=this.C*e,t}function _u(t){for(var e=1e-14,a=t.x/this.C,s=t.y,i=Math.pow(Math.tan(.5*s+B)/this.K,1/this.C),n=mu;n>0&&(s=2*Math.atan(i*Da(this.e*Math.sin(t.y),-.5*this.e))-S,!(Math.abs(s-t.y)<e));--n)t.y=s;return n?(t.x=a,t.y=s,t):null}const ka={init:pu,forward:Mu,inverse:_u};function yu(){ka.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Su(t){var e,a,s,i;return t.x=A(t.x-this.long0),ka.forward.apply(this,[t]),e=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*a*s),t.x=i*a*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*a*s),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function bu(t){var e,a,s,i,n;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,n=ut(t.x,t.y)){var o=2*Math.atan2(n,this.R2);e=Math.sin(o),a=Math.cos(o),i=Math.asin(a*this.sinc0+t.y*e*this.cosc0/n),s=Math.atan2(t.x*e,n*this.cosc0*a-t.y*this.sinc0*e)}else i=this.phic0,s=0;return t.x=s,t.y=i,ka.inverse.apply(this,[t]),t.x=A(t.x+this.long0),t}var xu=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Eu={init:yu,forward:Su,inverse:bu,names:xu};function Fa(t,e,a){return e*=a,Math.tan(.5*(S+t))*Math.pow((1-e)/(1+e),.5*a)}function wu(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=G&&(this.k0=.5*(1+de(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=G&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=G&&Math.abs(Math.cos(this.lat_ts))>G&&(this.k0=.5*this.cons*yt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/pt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=yt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(Fa(this.lat0,this.sinlat0,this.e))-S,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Pu(t){var e=t.x,a=t.y,s=Math.sin(a),i=Math.cos(a),n,o,r,l,h,f,u=A(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=G&&Math.abs(a+this.lat0)<=G?(t.x=NaN,t.y=NaN,t):this.sphere?(n=2*this.k0/(1+this.sinlat0*s+this.coslat0*i*Math.cos(u)),t.x=this.a*n*i*Math.sin(u)+this.x0,t.y=this.a*n*(this.coslat0*s-this.sinlat0*i*Math.cos(u))+this.y0,t):(o=2*Math.atan(Fa(a,s,this.e))-S,l=Math.cos(o),r=Math.sin(o),Math.abs(this.coslat0)<=G?(h=pt(this.e,a*this.con,this.con*s),f=2*this.a*this.k0*h/this.cons,t.x=this.x0+f*Math.sin(e-this.long0),t.y=this.y0-this.con*f*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<G?(n=2*this.a*this.k0/(1+l*Math.cos(u)),t.y=n*r):(n=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*l*Math.cos(u))),t.y=n*(this.cosX0*r-this.sinX0*l*Math.cos(u))+this.y0),t.x=n*l*Math.sin(u)+this.x0,t))}function Cu(t){t.x-=this.x0,t.y-=this.y0;var e,a,s,i,n,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var r=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,a=this.lat0,o<=G?(t.x=e,t.y=a,t):(a=Math.asin(Math.cos(r)*this.sinlat0+t.y*Math.sin(r)*this.coslat0/o),Math.abs(this.coslat0)<G?this.lat0>0?e=A(this.long0+Math.atan2(t.x,-1*t.y)):e=A(this.long0+Math.atan2(t.x,t.y)):e=A(this.long0+Math.atan2(t.x*Math.sin(r),o*this.coslat0*Math.cos(r)-t.y*this.sinlat0*Math.sin(r))),t.x=e,t.y=a,t)}else if(Math.abs(this.coslat0)<=G){if(o<=G)return a=this.lat0,e=this.long0,t.x=e,t.y=a,t;t.x*=this.con,t.y*=this.con,s=o*this.cons/(2*this.a*this.k0),a=this.con*ce(this.e,s),e=this.con*A(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=G?n=this.X0:(n=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/o),e=A(this.long0+Math.atan2(t.x*Math.sin(i),o*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),a=-1*ce(this.e,Math.tan(.5*(S+n)));return t.x=e,t.y=a,t}var Iu=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const Gu={init:wu,forward:Pu,inverse:Cu,names:Iu,ssfn_:Fa};function Ou(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),a=this.a,s=this.rf,i=1/s,n=2*i-Math.pow(i,2),o=this.e=Math.sqrt(n);this.R=this.k0*a*Math.sqrt(1-n)/(1-n*Math.pow(e,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var r=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+o*e)/(1-o*e));this.K=r-this.alpha*l+this.alpha*o/2*h}function Au(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),a=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),s=-this.alpha*(e+a)+this.K,i=2*(Math.atan(Math.exp(s))-Math.PI/4),n=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(n)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(n))),r=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(n));return t.y=this.R/2*Math.log((1+Math.sin(r))/(1-Math.sin(r)))+this.y0,t.x=this.R*o+this.x0,t}function Ru(t){for(var e=t.x-this.x0,a=t.y-this.y0,s=e/this.R,i=2*(Math.atan(Math.exp(a/this.R))-Math.PI/4),n=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(s)),o=Math.atan(Math.sin(s)/(Math.cos(this.b0)*Math.cos(s)-Math.sin(this.b0)*Math.tan(i))),r=this.lambda0+o/this.alpha,l=0,h=n,f=-1e3,u=0;Math.abs(h-f)>1e-7;){if(++u>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+n/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),f=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=r,t.y=h,t}var Nu=["somerc"];const Lu={init:Ou,forward:Au,inverse:Ru,names:Nu};var Vt=1e-7;function Tu(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],a=typeof t.projName=="object"?Object.keys(t.projName)[0]:t.projName;return"no_uoff"in t||"no_off"in t||e.indexOf(a)!==-1||e.indexOf(ps(a))!==-1}function Du(){var t,e,a,s,i,n,o,r,l,h,f=0,u,c=0,d=0,g=0,v=0,m=0,p=0;this.no_off=Tu(this),this.no_rot="no_rot"in this;var _=!1;"alpha"in this&&(_=!0);var y=!1;if("rectified_grid_angle"in this&&(y=!0),_&&(p=this.alpha),y&&(f=this.rectified_grid_angle),_||y)c=this.longc;else if(d=this.long1,v=this.lat1,g=this.long2,m=this.lat2,Math.abs(v-m)<=Vt||(t=Math.abs(v))<=Vt||Math.abs(t-S)<=Vt||Math.abs(Math.abs(this.lat0)-S)<=Vt||Math.abs(Math.abs(m)-S)<=Vt)throw new Error;var E=1-this.es;e=Math.sqrt(E),Math.abs(this.lat0)>G?(r=Math.sin(this.lat0),a=Math.cos(this.lat0),t=1-this.es*r*r,this.B=a*a,this.B=Math.sqrt(1+this.es*this.B*this.B/E),this.A=this.B*this.k0*e/t,s=this.B*e/(a*Math.sqrt(t)),i=s*s-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=s,this.E*=Math.pow(pt(this.e,this.lat0,r),this.B)):(this.B=1/e,this.A=this.k0,this.E=s=i=1),_||y?(_?(u=Math.asin(Math.sin(p)/s),y||(f=p)):(u=f,p=Math.asin(s*Math.sin(u))),this.lam0=c-Math.asin(.5*(i-1/i)*Math.tan(u))/this.B):(n=Math.pow(pt(this.e,v,Math.sin(v)),this.B),o=Math.pow(pt(this.e,m,Math.sin(m)),this.B),i=this.E/n,l=(o-n)/(o+n),h=this.E*this.E,h=(h-o*n)/(h+o*n),t=d-g,t<-Math.PI?g-=he:t>Math.PI&&(g+=he),this.lam0=A(.5*(d+g)-Math.atan(h*Math.tan(.5*this.B*(d-g))/l)/this.B),u=Math.atan(2*Math.sin(this.B*A(d-this.lam0))/(i-1/i)),f=p=Math.asin(s*Math.sin(u))),this.singam=Math.sin(u),this.cosgam=Math.cos(u),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(s*s-1)/Math.cos(p))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*u,this.v_pole_n=this.ArB*Math.log(Math.tan(B-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(B+i))}function ku(t){var e={},a,s,i,n,o,r,l,h;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-S)>G){if(o=this.E/Math.pow(pt(this.e,t.y,Math.sin(t.y)),this.B),r=1/o,a=.5*(o-r),s=.5*(o+r),n=Math.sin(this.B*t.x),i=(a*this.singam-n*this.cosgam)/s,Math.abs(Math.abs(i)-1)<G)throw new Error;h=.5*this.ArB*Math.log((1-i)/(1+i)),r=Math.cos(this.B*t.x),Math.abs(r)<Vt?l=this.A*t.x:l=this.ArB*Math.atan2(a*this.cosgam+n*this.singam,r)}else h=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(e.x=l,e.y=h):(l-=this.u_0,e.x=h*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-h*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Fu(t){var e,a,s,i,n,o,r,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(a=t.y,e=t.x):(a=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),s=Math.exp(-this.BrA*a),i=.5*(s-1/s),n=.5*(s+1/s),o=Math.sin(this.BrA*e),r=(o*this.cosgam+i*this.singam)/n,Math.abs(Math.abs(r)-1)<G)l.x=0,l.y=r<0?-S:S;else{if(l.y=this.E/Math.sqrt((1+r)/(1-r)),l.y=ce(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var Vu=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const $u={init:Du,forward:ku,inverse:Fu,names:Vu};function Uu(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<G)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),a=Math.cos(this.lat1),s=yt(this.e,e,a),i=pt(this.e,this.lat1,e),n=Math.sin(this.lat2),o=Math.cos(this.lat2),r=yt(this.e,n,o),l=pt(this.e,this.lat2,n),h=Math.abs(Math.abs(this.lat0)-S)<G?0:pt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>G?this.ns=Math.log(s/r)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=s/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function qu(t){var e=t.x,a=t.y;Math.abs(2*Math.abs(a)-Math.PI)<=G&&(a=de(a)*(S-2*G));var s=Math.abs(Math.abs(a)-S),i,n;if(s>G)i=pt(this.e,a,Math.sin(a)),n=this.a*this.f0*Math.pow(i,this.ns);else{if(s=a*this.ns,s<=0)return null;n=0}var o=this.ns*A(e-this.long0);return t.x=this.k0*(n*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-n*Math.cos(o))+this.y0,t}function Bu(t){var e,a,s,i,n,o=(t.x-this.x0)/this.k0,r=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+r*r),a=1):(e=-Math.sqrt(o*o+r*r),a=-1);var l=0;if(e!==0&&(l=Math.atan2(a*o,a*r)),e!==0||this.ns>0){if(a=1/this.ns,s=Math.pow(e/(this.a*this.f0),a),i=ce(this.e,s),i===-9999)return null}else i=-S;return n=A(l/this.ns+this.long0),t.x=n,t.y=i,t}var ju=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const zu={init:Uu,forward:qu,inverse:Bu,names:ju};function Hu(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Wu(t){var e,a,s,i,n,o,r,l=t.x,h=t.y,f=A(l-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),a=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),s=-f*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(a)+Math.sin(this.ad)*Math.cos(a)*Math.cos(s)),n=Math.asin(Math.cos(a)*Math.sin(s)/Math.cos(i)),o=this.n*n,r=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=r*Math.cos(o)/1,t.x=r*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Xu(t){var e,a,s,i,n,o,r,l,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),n=Math.atan2(t.y,t.x),i=n/Math.sin(this.s0),s=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(s)-Math.sin(this.ad)*Math.cos(s)*Math.cos(i)),a=Math.asin(Math.cos(s)*Math.sin(i)/Math.cos(e)),t.x=this.long0-a/this.alfa,r=e,l=0;var f=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(r))/(1-this.e*Math.sin(r)),this.e/2))-this.s45),Math.abs(r-t.y)<1e-10&&(l=1),r=t.y,f+=1;while(l===0&&f<15);return f>=15?null:t}var Qu=["Krovak","krovak"];const Ku={init:Hu,forward:Wu,inverse:Xu,names:Qu};function lt(t,e,a,s,i){return t*i-e*Math.sin(2*i)+a*Math.sin(4*i)-s*Math.sin(6*i)}function ve(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function ge(t){return .375*t*(1+.25*t*(1+.46875*t))}function me(t){return .05859375*t*t*(1+.75*t)}function pe(t){return t*t*t*(35/3072)}function Va(t,e,a){var s=e*a;return t/Math.sqrt(1-s*s)}function At(t){return Math.abs(t)<S?t:t-de(t)*Math.PI}function qe(t,e,a,s,i){var n,o;n=t/e;for(var r=0;r<15;r++)if(o=(t-(e*n-a*Math.sin(2*n)+s*Math.sin(4*n)-i*Math.sin(6*n)))/(e-2*a*Math.cos(2*n)+4*s*Math.cos(4*n)-6*i*Math.cos(6*n)),n+=o,Math.abs(o)<=1e-10)return n;return NaN}function Ju(){this.sphere||(this.e0=ve(this.es),this.e1=ge(this.es),this.e2=me(this.es),this.e3=pe(this.es),this.ml0=this.a*lt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Yu(t){var e,a,s=t.x,i=t.y;if(s=A(s-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(s)),a=this.a*(Math.atan2(Math.tan(i),Math.cos(s))-this.lat0);else{var n=Math.sin(i),o=Math.cos(i),r=Va(this.a,this.e,n),l=Math.tan(i)*Math.tan(i),h=s*Math.cos(i),f=h*h,u=this.es*o*o/(1-this.es),c=this.a*lt(this.e0,this.e1,this.e2,this.e3,i);e=r*h*(1-f*l*(1/6-(8-l+8*u)*f/120)),a=c-this.ml0+r*n/o*f*(.5+(5-l+6*u)*f/24)}return t.x=e+this.x0,t.y=a+this.y0,t}function Zu(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,a=t.y/this.a,s,i;if(this.sphere){var n=a+this.lat0;s=Math.asin(Math.sin(n)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(n))}else{var o=this.ml0/this.a+a,r=qe(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(r)-S)<=G)return t.x=this.long0,t.y=S,a<0&&(t.y*=-1),t;var l=Va(this.a,this.e,Math.sin(r)),h=l*l*l/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(r),2),u=e*this.a/l,c=u*u;s=r-l*Math.tan(r)/h*u*u*(.5-(1+3*f)*u*u/24),i=u*(1-c*(f/3+(1+3*f)*f*c/15))/Math.cos(r)}return t.x=A(i+this.long0),t.y=At(s),t}var tc=["Cassini","Cassini_Soldner","cass"];const ec={init:Ju,forward:Yu,inverse:Zu,names:tc};function It(t,e){var a;return t>1e-7?(a=t*e,(1-t*t)*(e/(1-a*a)-.5/t*Math.log((1-a)/(1+a)))):2*e}var Ma=1,_a=2,ya=3,Ae=4;function ac(){var t=Math.abs(this.lat0);if(Math.abs(t-S)<G?this.mode=this.lat0<0?Ma:_a:Math.abs(t)<G?this.mode=ya:this.mode=Ae,this.es>0){var e;switch(this.qp=It(this.e,1),this.mmf=.5/(1-this.es),this.apa=cc(this.es),this.mode){case _a:this.dd=1;break;case Ma:this.dd=1;break;case ya:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case Ae:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=It(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===Ae&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function ic(t){var e,a,s,i,n,o,r,l,h,f,u=t.x,c=t.y;if(u=A(u-this.long0),this.sphere){if(n=Math.sin(c),f=Math.cos(c),s=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(a=this.mode===this.EQUIT?1+f*s:1+this.sinph0*n+this.cosph0*f*s,a<=G)return null;a=Math.sqrt(2/a),e=a*f*Math.sin(u),a*=this.mode===this.EQUIT?n:this.cosph0*n-this.sinph0*f*s}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),Math.abs(c+this.lat0)<G)return null;a=B-c*.5,a=2*(this.mode===this.S_POLE?Math.cos(a):Math.sin(a)),e=a*Math.sin(u),a*=s}}else{switch(r=0,l=0,h=0,s=Math.cos(u),i=Math.sin(u),n=Math.sin(c),o=It(this.e,n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(r=o/this.qp,l=Math.sqrt(1-r*r)),this.mode){case this.OBLIQ:h=1+this.sinb1*r+this.cosb1*l*s;break;case this.EQUIT:h=1+l*s;break;case this.N_POLE:h=S+c,o=this.qp-o;break;case this.S_POLE:h=c-S,o=this.qp+o;break}if(Math.abs(h)<G)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?a=this.ymf*h*(this.cosb1*r-this.sinb1*l*s):a=(h=Math.sqrt(2/(1+l*s)))*r*this.ymf,e=this.xmf*h*l*i;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(h=Math.sqrt(o))*i,a=s*(this.mode===this.S_POLE?h:-h)):e=a=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*a+this.y0,t}function sc(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,a=t.y/this.a,s,i,n,o,r,l,h;if(this.sphere){var f=0,u,c=0;if(u=Math.sqrt(e*e+a*a),i=u*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(c=Math.sin(i),f=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(u)<=G?0:Math.asin(a*c/u),e*=c,a=f*u;break;case this.OBLIQ:i=Math.abs(u)<=G?this.lat0:Math.asin(f*this.sinph0+a*c*this.cosph0/u),e*=c*this.cosph0,a=(f-Math.sin(i)*this.sinph0)*u;break;case this.N_POLE:a=-a,i=S-i;break;case this.S_POLE:i-=S;break}s=a===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,a)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,a*=this.dd,l=Math.sqrt(e*e+a*a),l<G)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*l/this.rq),n=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(h=n*this.sinb1+a*o*this.cosb1/l,r=this.qp*h,a=l*this.cosb1*n-a*this.sinb1*o):(h=a*o/l,r=this.qp*h,a=l*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),r=e*e+a*a,!r)return t.x=this.long0,t.y=this.lat0,t;h=1-r/this.qp,this.mode===this.S_POLE&&(h=-h)}s=Math.atan2(e,a),i=fc(Math.asin(h),this.apa)}return t.x=A(this.long0+s),t.y=i,t}var nc=.3333333333333333,rc=.17222222222222222,oc=.10257936507936508,lc=.06388888888888888,hc=.0664021164021164,uc=.016415012942191543;function cc(t){var e,a=[];return a[0]=t*nc,e=t*t,a[0]+=e*rc,a[1]=e*lc,e*=t,a[0]+=e*oc,a[1]+=e*hc,a[2]=e*uc,a}function fc(t,e){var a=t+t;return t+e[0]*Math.sin(a)+e[1]*Math.sin(a+a)+e[2]*Math.sin(a+a+a)}var dc=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const vc={init:ac,forward:ic,inverse:sc,names:dc,S_POLE:Ma,N_POLE:_a,EQUIT:ya,OBLIQ:Ae};function Ot(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function gc(){Math.abs(this.lat1+this.lat2)<G||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=yt(this.e3,this.sin_po,this.cos_po),this.qs1=It(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=yt(this.e3,this.sin_po,this.cos_po),this.qs2=It(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=It(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>G?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function mc(t){var e=t.x,a=t.y;this.sin_phi=Math.sin(a),this.cos_phi=Math.cos(a);var s=It(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*s)/this.ns0,n=this.ns0*A(e-this.long0),o=i*Math.sin(n)+this.x0,r=this.rh-i*Math.cos(n)+this.y0;return t.x=o,t.y=r,t}function pc(t){var e,a,s,i,n,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),s=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),s=-1),i=0,e!==0&&(i=Math.atan2(s*t.x,s*t.y)),s=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-s*s)/(2*this.ns0)):(a=(this.c-s*s)/this.ns0,o=this.phi1z(this.e3,a)),n=A(i/this.ns0+this.long0),t.x=n,t.y=o,t}function Mc(t,e){var a,s,i,n,o,r=Ot(.5*e);if(t<G)return r;for(var l=t*t,h=1;h<=25;h++)if(a=Math.sin(r),s=Math.cos(r),i=t*a,n=1-i*i,o=.5*n*n/s*(e/(1-l)-a/n+.5/t*Math.log((1-i)/(1+i))),r=r+o,Math.abs(o)<=1e-7)return r;return null}var _c=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const yc={init:gc,forward:mc,inverse:pc,names:_c,phi1z:Mc};function Sc(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function bc(t){var e,a,s,i,n,o,r,l,h=t.x,f=t.y;return s=A(h-this.long0),e=Math.sin(f),a=Math.cos(f),i=Math.cos(s),o=this.sin_p14*e+this.cos_p14*a*i,n=1,o>0||Math.abs(o)<=G?(r=this.x0+this.a*n*a*Math.sin(s)/o,l=this.y0+this.a*n*(this.cos_p14*e-this.sin_p14*a*i)/o):(r=this.x0+this.infinity_dist*a*Math.sin(s),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*a*i)),t.x=r,t.y=l,t}function xc(t){var e,a,s,i,n,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),a=Math.sin(i),s=Math.cos(i),o=Ot(s*this.sin_p14+t.y*a*this.cos_p14/e),n=Math.atan2(t.x*a,e*this.cos_p14*s-t.y*this.sin_p14*a),n=A(this.long0+n)):(o=this.phic0,n=0),t.x=n,t.y=o,t}var Ec=["gnom"];const wc={init:Sc,forward:bc,inverse:xc,names:Ec};function Pc(t,e){var a=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-a)<1e-6)return e<0?-1*S:S;for(var s=Math.asin(.5*e),i,n,o,r,l=0;l<30;l++)if(n=Math.sin(s),o=Math.cos(s),r=t*n,i=Math.pow(1-r*r,2)/(2*o)*(e/(1-t*t)-n/(1-r*r)+.5/t*Math.log((1-r)/(1+r))),s+=i,Math.abs(i)<=1e-10)return s;return NaN}function Cc(){this.sphere||(this.k0=yt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Ic(t){var e=t.x,a=t.y,s,i,n=A(e-this.long0);if(this.sphere)s=this.x0+this.a*n*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var o=It(this.e,Math.sin(a));s=this.x0+this.a*this.k0*n,i=this.y0+this.a*o*.5/this.k0}return t.x=s,t.y=i,t}function Gc(t){t.x-=this.x0,t.y-=this.y0;var e,a;return this.sphere?(e=A(this.long0+t.x/this.a/Math.cos(this.lat_ts)),a=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(a=Pc(this.e,2*t.y*this.k0/this.a),e=A(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=a,t}var Oc=["cea"];const Ac={init:Cc,forward:Ic,inverse:Gc,names:Oc};function Rc(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Nc(t){var e=t.x,a=t.y,s=A(e-this.long0),i=At(a-this.lat0);return t.x=this.x0+this.a*s*this.rc,t.y=this.y0+this.a*i,t}function Lc(t){var e=t.x,a=t.y;return t.x=A(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=At(this.lat0+(a-this.y0)/this.a),t}var Tc=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const Dc={init:Rc,forward:Nc,inverse:Lc,names:Tc};var Ii=20;function kc(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ve(this.es),this.e1=ge(this.es),this.e2=me(this.es),this.e3=pe(this.es),this.ml0=this.a*lt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Fc(t){var e=t.x,a=t.y,s,i,n,o=A(e-this.long0);if(n=o*Math.sin(a),this.sphere)Math.abs(a)<=G?(s=this.a*o,i=-1*this.a*this.lat0):(s=this.a*Math.sin(n)/Math.tan(a),i=this.a*(At(a-this.lat0)+(1-Math.cos(n))/Math.tan(a)));else if(Math.abs(a)<=G)s=this.a*o,i=-1*this.ml0;else{var r=Va(this.a,this.e,Math.sin(a))/Math.tan(a);s=r*Math.sin(n),i=this.a*lt(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+r*(1-Math.cos(n))}return t.x=s+this.x0,t.y=i+this.y0,t}function Vc(t){var e,a,s,i,n,o,r,l,h;if(s=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=G)e=A(s/this.a+this.long0),a=0;else{o=this.lat0+i/this.a,r=s*s/this.a/this.a+o*o,l=o;var f;for(n=Ii;n;--n)if(f=Math.tan(l),h=-1*(o*(l*f+1)-l-.5*(l*l+r)*f)/((l-o)/f-1),l+=h,Math.abs(h)<=G){a=l;break}e=A(this.long0+Math.asin(s*Math.tan(l)/this.a)/Math.sin(a))}else if(Math.abs(i+this.ml0)<=G)a=0,e=A(this.long0+s/this.a);else{o=(this.ml0+i)/this.a,r=s*s/this.a/this.a+o*o,l=o;var u,c,d,g,v;for(n=Ii;n;--n)if(v=this.e*Math.sin(l),u=Math.sqrt(1-v*v)*Math.tan(l),c=this.a*lt(this.e0,this.e1,this.e2,this.e3,l),d=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),g=c/this.a,h=(o*(u*g+1)-g-.5*u*(g*g+r))/(this.es*Math.sin(2*l)*(g*g+r-2*o*g)/(4*u)+(o-g)*(u*d-2/Math.sin(2*l))-d),l-=h,Math.abs(h)<=G){a=l;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(a),2))*Math.tan(a),e=A(this.long0+Math.asin(s*u/this.a)/Math.sin(a))}return t.x=e,t.y=a,t}var $c=["Polyconic","American_Polyconic","poly"];const Uc={init:kc,forward:Fc,inverse:Vc,names:$c};function qc(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Bc(t){var e,a=t.x,s=t.y,i=s-this.lat0,n=a-this.long0,o=i/se*1e-5,r=n,l=1,h=0;for(e=1;e<=10;e++)l=l*o,h=h+this.A[e]*l;var f=h,u=r,c=1,d=0,g,v,m=0,p=0;for(e=1;e<=6;e++)g=c*f-d*u,v=d*f+c*u,c=g,d=v,m=m+this.B_re[e]*c-this.B_im[e]*d,p=p+this.B_im[e]*c+this.B_re[e]*d;return t.x=p*this.a+this.x0,t.y=m*this.a+this.y0,t}function jc(t){var e,a=t.x,s=t.y,i=a-this.x0,n=s-this.y0,o=n/this.a,r=i/this.a,l=1,h=0,f,u,c=0,d=0;for(e=1;e<=6;e++)f=l*o-h*r,u=h*o+l*r,l=f,h=u,c=c+this.C_re[e]*l-this.C_im[e]*h,d=d+this.C_im[e]*l+this.C_re[e]*h;for(var g=0;g<this.iterations;g++){var v=c,m=d,p,_,y=o,E=r;for(e=2;e<=6;e++)p=v*c-m*d,_=m*c+v*d,v=p,m=_,y=y+(e-1)*(this.B_re[e]*v-this.B_im[e]*m),E=E+(e-1)*(this.B_im[e]*v+this.B_re[e]*m);v=1,m=0;var w=this.B_re[1],x=this.B_im[1];for(e=2;e<=6;e++)p=v*c-m*d,_=m*c+v*d,v=p,m=_,w=w+e*(this.B_re[e]*v-this.B_im[e]*m),x=x+e*(this.B_im[e]*v+this.B_re[e]*m);var C=w*w+x*x;c=(y*w+E*x)/C,d=(E*w-y*x)/C}var I=c,P=d,L=1,V=0;for(e=1;e<=9;e++)L=L*I,V=V+this.D[e]*L;var b=this.lat0+V*se*1e5,O=this.long0+P;return t.x=O,t.y=b,t}var zc=["New_Zealand_Map_Grid","nzmg"];const Hc={init:qc,forward:Bc,inverse:jc,names:zc};function Wc(){}function Xc(t){var e=t.x,a=t.y,s=A(e-this.long0),i=this.x0+this.a*s,n=this.y0+this.a*Math.log(Math.tan(Math.PI/4+a/2.5))*1.25;return t.x=i,t.y=n,t}function Qc(t){t.x-=this.x0,t.y-=this.y0;var e=A(this.long0+t.x/this.a),a=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=a,t}var Kc=["Miller_Cylindrical","mill"];const Jc={init:Wc,forward:Xc,inverse:Qc,names:Kc};var Yc=20;function Zc(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Na(this.es)}function t0(t){var e,a,s=t.x,i=t.y;if(s=A(s-this.long0),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var n=this.n*Math.sin(i),o=Yc;o;--o){var r=(this.m*i+Math.sin(i)-n)/(this.m+Math.cos(i));if(i-=r,Math.abs(r)<G)break}e=this.a*this.C_x*s*(this.m+Math.cos(i)),a=this.a*this.C_y*i}else{var l=Math.sin(i),h=Math.cos(i);a=this.a*Xt(i,l,h,this.en),e=this.a*s*h/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=a,t}function e0(t){var e,a,s,i;return t.x-=this.x0,s=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,s=s/(this.C_x*(this.m+Math.cos(e))),this.m?e=Ot((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Ot(Math.sin(e)/this.n)),s=A(s+this.long0),e=At(e)):(e=La(t.y/this.a,this.es,this.en),i=Math.abs(e),i<S?(i=Math.sin(e),a=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),s=A(a)):i-G<S&&(s=this.long0)),t.x=s,t.y=e,t}var a0=["Sinusoidal","sinu"];const i0={init:Zc,forward:t0,inverse:e0,names:a0};function s0(){}function n0(t){for(var e=t.x,a=t.y,s=A(e-this.long0),i=a,n=Math.PI*Math.sin(a);;){var o=-(i+Math.sin(i)-n)/(1+Math.cos(i));if(i+=o,Math.abs(o)<G)break}i/=2,Math.PI/2-Math.abs(a)<G&&(s=0);var r=.900316316158*this.a*s*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=r,t.y=l,t}function r0(t){var e,a;t.x-=this.x0,t.y-=this.y0,a=t.y/(1.4142135623731*this.a),Math.abs(a)>.999999999999&&(a=.999999999999),e=Math.asin(a);var s=A(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));s<-Math.PI&&(s=-Math.PI),s>Math.PI&&(s=Math.PI),a=(2*e+Math.sin(2*e))/Math.PI,Math.abs(a)>1&&(a=1);var i=Math.asin(a);return t.x=s,t.y=i,t}var o0=["Mollweide","moll"];const l0={init:s0,forward:n0,inverse:r0,names:o0};function h0(){Math.abs(this.lat1+this.lat2)<G||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ve(this.es),this.e1=ge(this.es),this.e2=me(this.es),this.e3=pe(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=yt(this.e,this.sin_phi,this.cos_phi),this.ml1=lt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<G?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=yt(this.e,this.sin_phi,this.cos_phi),this.ml2=lt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=lt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function u0(t){var e=t.x,a=t.y,s;if(this.sphere)s=this.a*(this.g-a);else{var i=lt(this.e0,this.e1,this.e2,this.e3,a);s=this.a*(this.g-i)}var n=this.ns*A(e-this.long0),o=this.x0+s*Math.sin(n),r=this.y0+this.rh-s*Math.cos(n);return t.x=o,t.y=r,t}function c0(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,a,s,i;this.ns>=0?(a=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(a=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var n=0;if(a!==0&&(n=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=A(this.long0+n/this.ns),s=At(this.g-a/this.a),t.x=i,t.y=s,t;var o=this.g-a/this.a;return s=qe(o,this.e0,this.e1,this.e2,this.e3),i=A(this.long0+n/this.ns),t.x=i,t.y=s,t}var f0=["Equidistant_Conic","eqdc"];const d0={init:h0,forward:u0,inverse:c0,names:f0};function v0(){this.R=this.a}function g0(t){var e=t.x,a=t.y,s=A(e-this.long0),i,n;Math.abs(a)<=G&&(i=this.x0+this.R*s,n=this.y0);var o=Ot(2*Math.abs(a/Math.PI));(Math.abs(s)<=G||Math.abs(Math.abs(a)-S)<=G)&&(i=this.x0,a>=0?n=this.y0+Math.PI*this.R*Math.tan(.5*o):n=this.y0+Math.PI*this.R*-Math.tan(.5*o));var r=.5*Math.abs(Math.PI/s-s/Math.PI),l=r*r,h=Math.sin(o),f=Math.cos(o),u=f/(h+f-1),c=u*u,d=u*(2/h-1),g=d*d,v=Math.PI*this.R*(r*(u-g)+Math.sqrt(l*(u-g)*(u-g)-(g+l)*(c-g)))/(g+l);s<0&&(v=-v),i=this.x0+v;var m=l+u;return v=Math.PI*this.R*(d*m-r*Math.sqrt((g+l)*(l+1)-m*m))/(g+l),a>=0?n=this.y0+v:n=this.y0-v,t.x=i,t.y=n,t}function m0(t){var e,a,s,i,n,o,r,l,h,f,u,c,d;return t.x-=this.x0,t.y-=this.y0,u=Math.PI*this.R,s=t.x/u,i=t.y/u,n=s*s+i*i,o=-Math.abs(i)*(1+n),r=o-2*i*i+s*s,l=-2*o+1+2*i*i+n*n,d=i*i/l+(2*r*r*r/l/l/l-9*o*r/l/l)/27,h=(o-r*r/3/l)/l,f=2*Math.sqrt(-h/3),u=3*d/h/f,Math.abs(u)>1&&(u>=0?u=1:u=-1),c=Math.acos(u)/3,t.y>=0?a=(-f*Math.cos(c+Math.PI/3)-r/3/l)*Math.PI:a=-(-f*Math.cos(c+Math.PI/3)-r/3/l)*Math.PI,Math.abs(s)<G?e=this.long0:e=A(this.long0+Math.PI*(n-1+Math.sqrt(1+2*(s*s-i*i)+n*n))/2/s),t.x=e,t.y=a,t}var p0=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const M0={init:v0,forward:g0,inverse:m0,names:p0};function _0(t,e,a,s,i,n){const o=s-e,r=Math.atan((1-n)*Math.tan(t)),l=Math.atan((1-n)*Math.tan(a)),h=Math.sin(r),f=Math.cos(r),u=Math.sin(l),c=Math.cos(l);let d=o,g,v=100,m,p,_,y,E,w,x,C,I,P,L,V,b,O;do{if(m=Math.sin(d),p=Math.cos(d),_=Math.sqrt(c*m*(c*m)+(f*u-h*c*p)*(f*u-h*c*p)),_===0)return{azi1:0,s12:0};y=h*u+f*c*p,E=Math.atan2(_,y),w=f*c*m/_,x=1-w*w,C=x!==0?y-2*h*u/x:0,I=n/16*x*(4+n*(4-3*x)),g=d,d=o+(1-I)*n*w*(E+I*_*(C+I*y*(-1+2*C*C)))}while(Math.abs(d-g)>1e-12&&--v>0);return v===0?{azi1:NaN,s12:NaN}:(P=x*(i*i-i*(1-n)*(i*(1-n)))/(i*(1-n)*(i*(1-n))),L=1+P/16384*(4096+P*(-768+P*(320-175*P))),V=P/1024*(256+P*(-128+P*(74-47*P))),b=V*_*(C+V/4*(y*(-1+2*C*C)-V/6*C*(-3+4*_*_)*(-3+4*C*C))),O=i*(1-n)*L*(E-b),{azi1:Math.atan2(c*m,f*u-h*c*p),s12:O})}function y0(t,e,a,s,i,n){const o=Math.atan((1-n)*Math.tan(t)),r=Math.sin(o),l=Math.cos(o),h=Math.sin(a),f=Math.cos(a),u=Math.atan2(r,l*f),c=l*h,d=1-c*c,g=d*(i*i-i*(1-n)*(i*(1-n)))/(i*(1-n)*(i*(1-n))),v=1+g/16384*(4096+g*(-768+g*(320-175*g))),m=g/1024*(256+g*(-128+g*(74-47*g)));let p=s/(i*(1-n)*v),_,y=100,E,w,x,C;do E=Math.cos(2*u+p),w=Math.sin(p),x=Math.cos(p),C=m*w*(E+m/4*(x*(-1+2*E*E)-m/6*E*(-3+4*w*w)*(-3+4*E*E))),_=p,p=s/(i*(1-n)*v)+C;while(Math.abs(p-_)>1e-12&&--y>0);if(y===0)return{lat2:NaN,lon2:NaN};const I=r*w-l*x*f,P=Math.atan2(r*x+l*w*f,(1-n)*Math.sqrt(c*c+I*I)),L=Math.atan2(w*h,l*x-r*w*f),V=n/16*d*(4+n*(4-3*d)),b=L-(1-V)*n*c*(p+V*w*(E+V*x*(-1+2*E*E))),O=e+b;return{lat2:P,lon2:O}}function S0(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function b0(t){var e=t.x,a=t.y,s=Math.sin(t.y),i=Math.cos(t.y),n=A(e-this.long0),o,r,l,h,f,u,c,d,g,v,m;return this.sphere?Math.abs(this.sin_p12-1)<=G?(t.x=this.x0+this.a*(S-a)*Math.sin(n),t.y=this.y0-this.a*(S-a)*Math.cos(n),t):Math.abs(this.sin_p12+1)<=G?(t.x=this.x0+this.a*(S+a)*Math.sin(n),t.y=this.y0+this.a*(S+a)*Math.cos(n),t):(g=this.sin_p12*s+this.cos_p12*i*Math.cos(n),c=Math.acos(g),d=c?c/Math.sin(c):1,t.x=this.x0+this.a*d*i*Math.sin(n),t.y=this.y0+this.a*d*(this.cos_p12*s-this.sin_p12*i*Math.cos(n)),t):(o=ve(this.es),r=ge(this.es),l=me(this.es),h=pe(this.es),Math.abs(this.sin_p12-1)<=G?(f=this.a*lt(o,r,l,h,S),u=this.a*lt(o,r,l,h,a),t.x=this.x0+(f-u)*Math.sin(n),t.y=this.y0-(f-u)*Math.cos(n),t):Math.abs(this.sin_p12+1)<=G?(f=this.a*lt(o,r,l,h,S),u=this.a*lt(o,r,l,h,a),t.x=this.x0+(f+u)*Math.sin(n),t.y=this.y0+(f+u)*Math.cos(n),t):Math.abs(e)<G&&Math.abs(a-this.lat0)<G?(t.x=t.y=0,t):(v=_0(this.lat0,this.long0,a,e,this.a,this.f),m=v.azi1,t.x=v.s12*Math.sin(m),t.y=v.s12*Math.cos(m),t))}function x0(t){t.x-=this.x0,t.y-=this.y0;var e,a,s,i,n,o,r,l,h,f,u,c,d,g,v,m;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*S*this.a?void 0:(a=e/this.a,s=Math.sin(a),i=Math.cos(a),n=this.long0,Math.abs(e)<=G?o=this.lat0:(o=Ot(i*this.sin_p12+t.y*s*this.cos_p12/e),r=Math.abs(this.lat0)-S,Math.abs(r)<=G?this.lat0>=0?n=A(this.long0+Math.atan2(t.x,-t.y)):n=A(this.long0-Math.atan2(-t.x,t.y)):n=A(this.long0+Math.atan2(t.x*s,e*this.cos_p12*i-t.y*this.sin_p12*s))),t.x=n,t.y=o,t)):(l=ve(this.es),h=ge(this.es),f=me(this.es),u=pe(this.es),Math.abs(this.sin_p12-1)<=G?(c=this.a*lt(l,h,f,u,S),e=Math.sqrt(t.x*t.x+t.y*t.y),d=c-e,o=qe(d/this.a,l,h,f,u),n=A(this.long0+Math.atan2(t.x,-1*t.y)),t.x=n,t.y=o,t):Math.abs(this.sin_p12+1)<=G?(c=this.a*lt(l,h,f,u,S),e=Math.sqrt(t.x*t.x+t.y*t.y),d=e-c,o=qe(d/this.a,l,h,f,u),n=A(this.long0+Math.atan2(t.x,t.y)),t.x=n,t.y=o,t):(g=Math.atan2(t.x,t.y),v=Math.sqrt(t.x*t.x+t.y*t.y),m=y0(this.lat0,this.long0,g,v,this.a,this.f),t.x=m.lon2,t.y=m.lat2,t))}var E0=["Azimuthal_Equidistant","aeqd"];const w0={init:S0,forward:b0,inverse:x0,names:E0};function P0(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function C0(t){var e,a,s,i,n,o,r,l,h=t.x,f=t.y;return s=A(h-this.long0),e=Math.sin(f),a=Math.cos(f),i=Math.cos(s),o=this.sin_p14*e+this.cos_p14*a*i,n=1,(o>0||Math.abs(o)<=G)&&(r=this.a*n*a*Math.sin(s),l=this.y0+this.a*n*(this.cos_p14*e-this.sin_p14*a*i)),t.x=r,t.y=l,t}function I0(t){var e,a,s,i,n,o,r;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),a=Ot(e/this.a),s=Math.sin(a),i=Math.cos(a),o=this.long0,Math.abs(e)<=G?(r=this.lat0,t.x=o,t.y=r,t):(r=Ot(i*this.sin_p14+t.y*s*this.cos_p14/e),n=Math.abs(this.lat0)-S,Math.abs(n)<=G?(this.lat0>=0?o=A(this.long0+Math.atan2(t.x,-t.y)):o=A(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=r,t):(o=A(this.long0+Math.atan2(t.x*s,e*this.cos_p14*i-t.y*this.sin_p14*s)),t.x=o,t.y=r,t))}var G0=["ortho"];const O0={init:P0,forward:C0,inverse:I0,names:G0};var Q={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},j={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function A0(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=S-B/2?this.face=Q.TOP:this.lat0<=-(S-B/2)?this.face=Q.BOTTOM:Math.abs(this.long0)<=B?this.face=Q.FRONT:Math.abs(this.long0)<=S+B?this.face=this.long0>0?Q.RIGHT:Q.LEFT:this.face=Q.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function R0(t){var e={x:0,y:0},a,s,i,n,o,r,l={value:0};if(t.x-=this.long0,this.es!==0?a=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):a=t.y,s=t.x,this.face===Q.TOP)n=S-a,s>=B&&s<=S+B?(l.value=j.AREA_0,i=s-S):s>S+B||s<=-(S+B)?(l.value=j.AREA_1,i=s>0?s-J:s+J):s>-(S+B)&&s<=-B?(l.value=j.AREA_2,i=s+S):(l.value=j.AREA_3,i=s);else if(this.face===Q.BOTTOM)n=S+a,s>=B&&s<=S+B?(l.value=j.AREA_0,i=-s+S):s<B&&s>=-B?(l.value=j.AREA_1,i=-s):s<-B&&s>=-(S+B)?(l.value=j.AREA_2,i=-s-S):(l.value=j.AREA_3,i=s>0?-s+J:-s-J);else{var h,f,u,c,d,g,v;this.face===Q.RIGHT?s=zt(s,+S):this.face===Q.BACK?s=zt(s,+J):this.face===Q.LEFT&&(s=zt(s,-S)),c=Math.sin(a),d=Math.cos(a),g=Math.sin(s),v=Math.cos(s),h=d*v,f=d*g,u=c,this.face===Q.FRONT?(n=Math.acos(h),i=Pe(n,u,f,l)):this.face===Q.RIGHT?(n=Math.acos(f),i=Pe(n,u,-h,l)):this.face===Q.BACK?(n=Math.acos(-h),i=Pe(n,u,-f,l)):this.face===Q.LEFT?(n=Math.acos(-f),i=Pe(n,u,h,l)):(n=i=0,l.value=j.AREA_0)}return r=Math.atan(12/J*(i+Math.acos(Math.sin(i)*Math.cos(B))-S)),o=Math.sqrt((1-Math.cos(n))/(Math.cos(r)*Math.cos(r))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===j.AREA_1?r+=S:l.value===j.AREA_2?r+=J:l.value===j.AREA_3&&(r+=1.5*J),e.x=o*Math.cos(r),e.y=o*Math.sin(r),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function N0(t){var e={lam:0,phi:0},a,s,i,n,o,r,l,h,f,u={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,s=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),a=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?u.value=j.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(u.value=j.AREA_1,a-=S):t.x<0&&-t.x>=Math.abs(t.y)?(u.value=j.AREA_2,a=a<0?a+J:a-J):(u.value=j.AREA_3,a+=S),f=J/12*Math.tan(a),o=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),r=Math.atan(o),i=Math.cos(a),n=Math.tan(s),l=1-i*i*n*n*(1-Math.cos(Math.atan(1/Math.cos(r)))),l<-1?l=-1:l>1&&(l=1),this.face===Q.TOP)h=Math.acos(l),e.phi=S-h,u.value===j.AREA_0?e.lam=r+S:u.value===j.AREA_1?e.lam=r<0?r+J:r-J:u.value===j.AREA_2?e.lam=r-S:e.lam=r;else if(this.face===Q.BOTTOM)h=Math.acos(l),e.phi=h-S,u.value===j.AREA_0?e.lam=-r+S:u.value===j.AREA_1?e.lam=-r:u.value===j.AREA_2?e.lam=-r-S:e.lam=r<0?-r-J:-r+J;else{var c,d,g;c=l,f=c*c,f>=1?g=0:g=Math.sqrt(1-f)*Math.sin(r),f+=g*g,f>=1?d=0:d=Math.sqrt(1-f),u.value===j.AREA_1?(f=d,d=-g,g=f):u.value===j.AREA_2?(d=-d,g=-g):u.value===j.AREA_3&&(f=d,d=g,g=-f),this.face===Q.RIGHT?(f=c,c=-d,d=f):this.face===Q.BACK?(c=-c,d=-d):this.face===Q.LEFT&&(f=c,c=d,d=-f),e.phi=Math.acos(-g)-S,e.lam=Math.atan2(d,c),this.face===Q.RIGHT?e.lam=zt(e.lam,-S):this.face===Q.BACK?e.lam=zt(e.lam,-J):this.face===Q.LEFT&&(e.lam=zt(e.lam,+S))}if(this.es!==0){var v,m,p;v=e.phi<0?1:0,m=Math.tan(e.phi),p=this.b/Math.sqrt(m*m+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),v&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function Pe(t,e,a,s){var i;return t<G?(s.value=j.AREA_0,i=0):(i=Math.atan2(e,a),Math.abs(i)<=B?s.value=j.AREA_0:i>B&&i<=S+B?(s.value=j.AREA_1,i-=S):i>S+B||i<=-(S+B)?(s.value=j.AREA_2,i=i>=0?i-J:i+J):(s.value=j.AREA_3,i+=S)),i}function zt(t,e){var a=t+e;return a<-J?a+=he:a>+J&&(a-=he),a}var L0=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const T0={init:A0,forward:R0,inverse:N0,names:L0};var Sa=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ae=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Os=.8487,As=1.3523,Rs=_t/5,D0=1/Rs,Bt=18,Be=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},k0=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function F0(t,e,a,s){for(var i=e;s;--s){var n=t(i);if(i-=n,Math.abs(n)<a)break}return i}function V0(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function $0(t){var e=A(t.x-this.long0),a=Math.abs(t.y),s=Math.floor(a*Rs);s<0?s=0:s>=Bt&&(s=Bt-1),a=_t*(a-D0*s);var i={x:Be(Sa[s],a)*e,y:Be(ae[s],a)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*Os+this.x0,i.y=i.y*this.a*As+this.y0,i}function U0(t){var e={x:(t.x-this.x0)/(this.a*Os),y:Math.abs(t.y-this.y0)/(this.a*As)};if(e.y>=1)e.x/=Sa[Bt][0],e.y=t.y<0?-S:S;else{var a=Math.floor(e.y*Bt);for(a<0?a=0:a>=Bt&&(a=Bt-1);;)if(ae[a][0]>e.y)--a;else if(ae[a+1][0]<=e.y)++a;else break;var s=ae[a],i=5*(e.y-s[0])/(ae[a+1][0]-s[0]);i=F0(function(n){return(Be(s,n)-e.y)/k0(s,n)},i,G,100),e.x/=Be(Sa[a],i),e.y=(5*a+i)*at,t.y<0&&(e.y=-e.y)}return e.x=A(e.x+this.long0),e}var q0=["Robinson","robin"];const B0={init:V0,forward:$0,inverse:U0,names:q0};function j0(){this.name="geocent"}function z0(t){var e=_s(t,this.es,this.a);return e}function H0(t){var e=ys(t,this.es,this.a,this.b);return e}var W0=["Geocentric","geocentric","geocent","Geocent"];const X0={init:j0,forward:z0,inverse:H0,names:W0};var rt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Yt={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Q0(){if(Object.keys(Yt).forEach((function(a){if(typeof this[a]>"u")this[a]=Yt[a].def;else{if(Yt[a].num&&isNaN(this[a]))throw new Error("Invalid parameter value, must be numeric "+a+" = "+this[a]);Yt[a].num&&(this[a]=parseFloat(this[a]))}Yt[a].degrees&&(this[a]=this[a]*at)}).bind(this)),Math.abs(Math.abs(this.lat0)-S)<G?this.mode=this.lat0<0?rt.S_POLE:rt.N_POLE:Math.abs(this.lat0)<G?this.mode=rt.EQUIT:(this.mode=rt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function K0(t){t.x-=this.long0;var e=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x),i,n;switch(this.mode){case rt.OBLIQ:n=this.sinph0*e+this.cosph0*a*s;break;case rt.EQUIT:n=a*s;break;case rt.S_POLE:n=-e;break;case rt.N_POLE:n=e;break}switch(n=this.pn1/(this.p-n),i=n*a*Math.sin(t.x),this.mode){case rt.OBLIQ:n*=this.cosph0*e-this.sinph0*a*s;break;case rt.EQUIT:n*=e;break;case rt.N_POLE:n*=-(a*s);break;case rt.S_POLE:n*=a*s;break}var o,r;return o=n*this.cg+i*this.sg,r=1/(o*this.sw*this.h1+this.cw),i=(i*this.cg-n*this.sg)*this.cw*r,n=o*r,t.x=i*this.a,t.y=n*this.a,t}function J0(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},a,s,i;i=1/(this.pn1-t.y*this.sw),a=this.pn1*t.x*i,s=this.pn1*t.y*this.cw*i,t.x=a*this.cg+s*this.sg,t.y=s*this.cg-a*this.sg;var n=ut(t.x,t.y);if(Math.abs(n)<G)e.x=0,e.y=t.y;else{var o,r;switch(r=1-n*n*this.pfact,r=(this.p-Math.sqrt(r))/(this.pn1/n+n/this.pn1),o=Math.sqrt(1-r*r),this.mode){case rt.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*r*this.cosph0/n),t.y=(o-this.sinph0*Math.sin(e.y))*n,t.x*=r*this.cosph0;break;case rt.EQUIT:e.y=Math.asin(t.y*r/n),t.y=o*n,t.x*=r;break;case rt.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case rt.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var Y0=["Tilted_Perspective","tpers"];const Z0={init:Q0,forward:K0,inverse:J0,names:Y0};function tf(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function ef(t){var e=t.x,a=t.y,s,i,n,o;if(e=e-this.long0,this.shape==="ellipse"){a=Math.atan(this.radius_p2*Math.tan(a));var r=this.radius_p/ut(this.radius_p*Math.cos(a),Math.sin(a));if(i=r*Math.cos(e)*Math.cos(a),n=r*Math.sin(e)*Math.cos(a),o=r*Math.sin(a),(this.radius_g-i)*i-n*n-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/ut(o,s)),t.y=this.radius_g_1*Math.atan(o/s)):(t.x=this.radius_g_1*Math.atan(n/s),t.y=this.radius_g_1*Math.atan(o/ut(n,s)))}else this.shape==="sphere"&&(s=Math.cos(a),i=Math.cos(e)*s,n=Math.sin(e)*s,o=Math.sin(a),s=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/ut(o,s)),t.y=this.radius_g_1*Math.atan(o/s)):(t.x=this.radius_g_1*Math.atan(n/s),t.y=this.radius_g_1*Math.atan(o/ut(n,s))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function af(t){var e=-1,a=0,s=0,i,n,o,r;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*ut(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*ut(1,a));var l=s/this.radius_p;if(i=a*a+l*l+e*e,n=2*this.radius_g*e,o=n*n-4*i*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-n-Math.sqrt(o))/(2*i),e=this.radius_g+r*e,a*=r,s*=r,t.x=Math.atan2(a,e),t.y=Math.atan(s*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),i=a*a+s*s+e*e,n=2*this.radius_g*e,o=n*n-4*i*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-n-Math.sqrt(o))/(2*i),e=this.radius_g+r*e,a*=r,s*=r,t.x=Math.atan2(a,e),t.y=Math.atan(s*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var sf=["Geostationary Satellite View","Geostationary_Satellite","geos"];const nf={init:tf,forward:ef,inverse:af,names:sf};var ne=1.340264,re=-.081106,oe=893e-6,le=.003796,je=Math.sqrt(3)/2;function rf(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function of(t){var e=A(t.x-this.long0),a=t.y,s=Math.asin(je*Math.sin(a)),i=s*s,n=i*i*i;return t.x=e*Math.cos(s)/(je*(ne+3*re*i+n*(7*oe+9*le*i))),t.y=s*(ne+re*i+n*(oe+le*i)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function lf(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,a=12,s=t.y,i,n,o,r,l,h;for(h=0;h<a&&(i=s*s,n=i*i*i,o=s*(ne+re*i+n*(oe+le*i))-t.y,r=ne+3*re*i+n*(7*oe+9*le*i),s-=l=o/r,!(Math.abs(l)<e));++h);return i=s*s,n=i*i*i,t.x=je*t.x*(ne+3*re*i+n*(7*oe+9*le*i))/Math.cos(s),t.y=Math.asin(Math.sin(s)/je),t.x=A(t.x+this.long0),t}var hf=["eqearth","Equal Earth","Equal_Earth"];const uf={init:rf,forward:of,inverse:lf,names:hf};var fe=1e-10;function cf(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<fe)throw new Error;this.es?(this.en=Na(this.es),this.m1=Xt(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=df,this.forward=ff):(Math.abs(this.phi1)+fe>=S?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=gf,this.forward=vf)}function ff(t){var e=A(t.x-(this.long0||0)),a=t.y,s,i,n;return s=this.am1+this.m1-Xt(a,i=Math.sin(a),n=Math.cos(a),this.en),i=n*e/(s*Math.sqrt(1-this.es*i*i)),t.x=s*Math.sin(i),t.y=this.am1-s*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function df(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,a,s,i;if(a=ut(t.x,t.y=this.am1-t.y),i=La(this.am1+this.m1-a,this.es,this.en),(e=Math.abs(i))<S)e=Math.sin(i),s=a*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-S)<=fe)s=0;else throw new Error;return t.x=A(s+(this.long0||0)),t.y=At(i),t}function vf(t){var e=A(t.x-(this.long0||0)),a=t.y,s,i;return i=this.cphi1+this.phi1-a,Math.abs(i)>fe?(t.x=i*Math.sin(s=e*Math.cos(a)/i),t.y=this.cphi1-i*Math.cos(s)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function gf(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,a,s=ut(t.x,t.y=this.cphi1-t.y);if(a=this.cphi1+this.phi1-s,Math.abs(a)>S)throw new Error;return Math.abs(Math.abs(a)-S)<=fe?e=0:e=s*Math.atan2(t.x,t.y)/Math.cos(a),t.x=A(e+(this.long0||0)),t.y=At(a),t}var mf=["bonne","Bonne (Werner lat_1=90)"];const pf={init:cf,names:mf};function Mf(t){t.Proj.projections.add(Ge),t.Proj.projections.add(Oe),t.Proj.projections.add(gu),t.Proj.projections.add(Eu),t.Proj.projections.add(Gu),t.Proj.projections.add(Lu),t.Proj.projections.add($u),t.Proj.projections.add(zu),t.Proj.projections.add(Ku),t.Proj.projections.add(ec),t.Proj.projections.add(vc),t.Proj.projections.add(yc),t.Proj.projections.add(wc),t.Proj.projections.add(Ac),t.Proj.projections.add(Dc),t.Proj.projections.add(Uc),t.Proj.projections.add(Hc),t.Proj.projections.add(Jc),t.Proj.projections.add(i0),t.Proj.projections.add(l0),t.Proj.projections.add(d0),t.Proj.projections.add(M0),t.Proj.projections.add(w0),t.Proj.projections.add(O0),t.Proj.projections.add(T0),t.Proj.projections.add(B0),t.Proj.projections.add(X0),t.Proj.projections.add(Z0),t.Proj.projections.add(nf),t.Proj.projections.add(uf),t.Proj.projections.add(pf)}const Ns=Object.assign(Rh,{defaultDatum:"WGS84",Proj:Mt,WGS84:new Mt("WGS84"),Point:Wt,toPoint:Ss,defs:ot,nadgrid:vh,transform:Ue,mgrs:Nh,version:"__VERSION__"});Mf(Ns);const Gi=({placeholder:t="",onChange:e,stopList:a,value:s})=>{const{t:i}=ze(),n=ba(),o=M.useRef(new AbortController),r=M.useRef(Gn((l,h)=>{const f=Object.values(a).filter(u=>u.name.zh.includes(l)||u.name.en.toLowerCase().includes(l.toLowerCase())).map(u=>({label:`${u.name[n]} - ${i("車站")}`,location:u.location})).slice(0,10);o.current.abort(),o.current=new AbortController,_f(l,{signal:o.current.signal}).then(u=>{h(f.concat(u.map(({name:c,address:d,lat:g,lng:v})=>({label:[c[n],d[n]].filter(m=>m).join(" - "),location:{lat:g,lng:v}}))))})},200)).current;return $.jsx(yf,{isClearable:!0,value:s,loadOptions:r,placeholder:t,onChange:e,classNamePrefix:"react-select"})},_f=async(t,e)=>t?(await fetch(`https://geodata.gov.hk/gs/api/v1.0.0/locationSearch?q=${encodeURI(t)}`,e).then(s=>s.json())).map(s=>{const[i,n]=Ns("+proj=tmerc +lat_0=22.31213333333334 +lon_0=114.1785555555556 +k=1 +x_0=836694.05 +y_0=819069.8 +ellps=intl +towgs84=-162.619,-276.959,-161.764,0.067753,-2.24365,-1.15883,-1.09425 +units=m +no_defs","+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs",[s.x,s.y]);return{address:{zh:s.addressZH,en:s.addressEN},name:{zh:s.nameZH,en:s.nameEN},lat:n,lng:i}}):new Promise(s=>s([])),yf=qs(bl)(({theme:t})=>({".react-select__control":{background:`${t.palette.mode==="dark"?t.palette.background.default:"white"} !important`,border:"none !important",borderRadius:"unset !important",borderBottom:"1px hsl(0, 0%, 80%) solid !important"},".react-select__input":{color:`${t.palette.mode==="dark"?t.palette.primary.main:t.palette.text.primary} !important`},".react-select__valueContainer":{color:`${t.palette.mode==="dark"?t.palette.primary.main:t.palette.text.primary} !important`},".react-select__single-value":{color:`${t.palette.mode==="dark"?t.palette.primary.main:t.palette.text.primary} !important`},".react-select__option:hover":{filter:"grayscale(1) !important"},".react-select__option--is-focused":{background:`${t.palette.mode==="dark"?t.palette.background.default:"white"} !important`},".react-select__option--is-selected":{background:`${t.palette.mode==="dark"?t.palette.background.default:"white"} !important`,color:`${t.palette.mode==="dark"?t.palette.primary.main:t.palette.text.primary} !important`},".react-select__menu":{background:`${t.palette.mode==="dark"?t.palette.background.default:"white"} !important`,color:`${t.palette.mode==="dark"?t.palette.primary.main:t.palette.text.primary} !important`},".react-select__meauList":{background:`${t.palette.mode==="dark"?t.palette.background.default:"white"} !important`,color:`${t.palette.mode==="dark"?t.palette.primary.main:t.palette.text.primary} !important`}})),Sf=({routes:t,start:e,end:a,stopIdx:s,onMarkerClick:i,onMapClick:n})=>{const{geolocation:o,colorMode:r,mapStyleType:l}=M.useContext(Ai),{db:{routeList:h,stopList:f}}=M.useContext(xa),[u,c]=M.useState({center:null,isFollow:!1}),{center:d,isFollow:g}=u,[v,m]=M.useState(null),p=M.useRef(null),_=M.useRef([]),y=M.useRef([]),E=M.useRef(new Set),[w,x]=M.useState(0),C=b=>{for(;b>180;)b-=360;for(;b<-180;)b+=360;return b},I=b=>b.length===0?b:b.map((O,R)=>{if(R===0)return{...O,lng:C(O.lng)};let T=O.lng;const N=b[R-1].lng;for(T=C(T);T-N>180;)T-=360;for(;T-N<-180;)T+=360;return{lat:O.lat,lng:T}}),P=M.useCallback(b=>{const{center:O,isFollow:R}=b??{};c({center:O||(v==null?void 0:v.getCenter())||null,isFollow:R||!1})},[v,c]),L=()=>{if(d)return d;if(e&&a){const b=I([e,a]);return{lat:(b[0].lat+b[1].lat)/2,lng:(b[0].lng+b[1].lng)/2}}return js(e)},V=M.useCallback(()=>{v&&(E.current.forEach(b=>{const O=`${b}-layer`;v.getLayer(O)&&v.removeLayer(O),v.getSource(b)&&v.removeSource(b)}),E.current.clear())},[v]);return M.useEffect(()=>{if(!p.current)return;const b=L(),O=new _e.Map({container:p.current,style:$a(r,l),center:[C(b.lng),b.lat],zoom:15,pitch:0,maxPitch:0,minZoom:0,maxZoom:22,renderWorldCopies:!1});return O.addControl(new _e.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})),O.addControl(new _e.NavigationControl({visualizePitch:!0,visualizeRoll:!0,showZoom:!0,showCompass:!0})),O.on("load",()=>{m(O),n&&O.on("click",R=>{n({lng:R.lngLat.lng,lat:R.lngLat.lat})})}),()=>{O.remove(),m(null)}},[]),M.useEffect(()=>{if(!v)return;const b=()=>{const O=v.getCenter();P({center:{lat:O.lat,lng:O.lng}})};return v.on("dragend",b),()=>{v.off("dragend",b)}},[v,P]),M.useEffect(()=>{g&&(!d||o.current.lat!==d.lat||o.current.lng!==d.lng)&&P({center:o.current,isFollow:!0})},[o,d,g,P]),M.useEffect(()=>{if(!(!v||!e))if(a){const b=I([e,a]),O=new _e.LngLatBounds;b.forEach(R=>{O.extend([R.lng,R.lat])}),v.fitBounds(O,{padding:80,duration:1e3,maxZoom:16})}else{const b=I([e])[0];v.flyTo({center:[b.lng,b.lat],zoom:15,duration:1e3})}},[v,e,a]),M.useEffect(()=>{if(!v)return;const b=$a(r,l);v.setStyle(b);const O=()=>{l==="raster"&&sn(v,r),x(R=>R+1)};return v.once("styledata",O),()=>{v.off("styledata",O)}},[v,r,l]),M.useEffect(()=>{if(!v||(_.current.forEach(N=>N.remove()),_.current=[],V(),s===null||!Array.isArray(t)||t.length===0))return;const b=[e];t.forEach(({routeId:N,on:H,off:z})=>{const W=h[N],U=W&&W.stops?Object.values(W.stops):[],Y=U.length?U.sort((X,Z)=>Z.length-X.length)[0]:[];(Array.isArray(Y)?Y.slice(H,z+1):[]).forEach(X=>{f[X]&&b.push(f[X].location)})}),a&&b.push(a);const O=I(b);let R=0;const T=[];T.push(O[R++]),t.forEach(({routeId:N,on:H,off:z})=>{const W=h[N],U=W&&W.stops?Object.values(W.stops):[],Y=U.length?U.sort((X,Z)=>Z.length-X.length)[0]:[],q=Array.isArray(Y)?Y.slice(H,z+1):[];q.length>0&&(T.push(O[R]),R+=q.length-1,T.push(O[R]),R++)}),T.push(a?O[O.length-1]:O[0]);for(let N=0;N<Math.floor(T.length/2);++N){const H=`walk-${N}`,z=[[T[N*2].lng,T[N*2].lat],[T[N*2+1].lng,T[N*2+1].lat]];v.addSource(H,{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:z}}}),v.addLayer({id:`${H}-layer`,type:"line",source:H,paint:{"line-color":"#4CAF50","line-width":3,"line-dasharray":[2,2]}}),E.current.add(H)}return R=1,t.forEach(({routeId:N,on:H,off:z},W)=>{const U=h[N],Y=U&&U.stops?Object.values(U.stops):[],q=Y.length?Y.sort((gt,bt)=>bt.length-gt.length)[0]:[],X=Array.isArray(q)?q.slice(H,z+1):[];if(X.length===0)return;const Z=O.slice(R,R+X.length);R+=X.length;const it=U&&U.co&&U.co.includes("mtr"),st=N.split("-")[0],ft=it?Bs(U.co,st):W===0?"#2196F3":"#FF9800",et=`route-${W}-line`,wt=Z.map(gt=>[gt.lng,gt.lat]);v.addSource(et,{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:wt}}}),v.addLayer({id:`${et}-layer`,type:"line",source:et,paint:{"line-color":ft,"line-width":4,"line-opacity":.8}}),E.current.add(et),Z.forEach((gt,bt)=>{const Pt=s[W]!==void 0&&bt<s[W],Qt=Pt?"#9E9E9E":ft,nt=document.createElement("div");nt.className=`${Ht.marker} ${Pt?Ht.passed:""}`,nt.style.backgroundColor=Qt,nt.style.width="10px",nt.style.height="10px",nt.style.borderRadius="50%",nt.style.border="2px solid white",nt.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)",nt.style.cursor="pointer",nt.style.zIndex="100";const Rt=new Ke.Marker({element:nt,anchor:"center"}).setLngLat([gt.lng,gt.lat]).addTo(v);nt.addEventListener("click",()=>{i(N,bt)}),_.current.push(Rt)})}),()=>{_.current.forEach(N=>N.remove()),_.current=[]}},[v,t,s,h,f,i,e,a,V,w]),M.useEffect(()=>{if(!v)return;y.current.forEach(T=>T.remove()),y.current=[];const b=I(a?[e,a]:[e]),O=new Ke.Marker({color:"#4CAF50",scale:1.2}).setLngLat([b[0].lng,b[0].lat]).addTo(v);O.getElement().style.zIndex="101",y.current.push(O);let R=null;return a&&b.length>1&&(R=new Ke.Marker({color:"#F44336",scale:1.2}).setLngLat([b[1].lng,b[1].lat]).addTo(v),R.getElement().style.zIndex="101",y.current.push(R)),()=>{y.current.forEach(T=>T.remove()),y.current=[]}},[v,e,a]),$.jsx(ie,{sx:bf,children:$.jsx("div",{ref:p,className:Ht.mapContainer})})},la="map",Ht={mapContainer:`${la}-mapContainer`,marker:`${la}-marker`,passed:`${la}-passed`},bf={height:"35vh",position:"relative",filter:t=>t.palette.mode==="dark"?"brightness(0.85)":"none",[`& .${Ht.mapContainer}`]:{height:"35vh",width:"100%",borderRadius:1,overflow:"hidden"},[`& .${Ht.marker}`]:{outline:"none","&:hover":{transform:"scale(1.5)"}},[`& .${Ht.passed}`]:{opacity:.5}},xf=({routes:t,idx:e,handleRouteClick:a,expanded:s,stopIdx:i})=>{const{db:{routeList:n,stopList:o}}=M.useContext(xa),{t:r}=ze(),l=ba(),h=M.useCallback(f=>{const u=[];f.forEach(v=>{const{routeId:m,on:p}=v,{fares:_,stops:y}=n[m];u.push(o[Object.values(y).sort((E,w)=>w.length-E.length)[0][p]].name[l]+(_?` ($${_[p]})`:""))});const{routeId:c,off:d}=f[f.length-1],{stops:g}=n[c];return u.concat(o[Object.values(g).sort((v,m)=>m.length-v.length)[0][d]].name[l]).join(" → ")},[n,l,o]);return $.jsxs(nn,{TransitionProps:{unmountOnExit:!0},sx:Ef,onChange:()=>a(e),expanded:s,children:[$.jsx(rn,{sx:wf,children:$.jsx(Js,{primary:t.map((f,u)=>{const{routeId:c}=f,{route:d,serviceType:g}=n[c];return $.jsxs("span",{children:[$.jsx(Ys,{routeNo:d}),parseInt(g,10)>=2&&$.jsx(Nt,{variant:"caption",children:r("特別班")})]},`search-${e}-${u}`)}),secondary:h(t),sx:If})}),$.jsx(on,{sx:Pf,children:t.map((f,u)=>$.jsx(ln,{routeId:f.routeId.toUpperCase(),seq:f.on+(i?i[u]:0),containerSx:Cf,showStopName:!0},`timereport-${e}-${u}`))})]})},Ef={border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&.Mui-expanded":{margin:"auto"}},wf={backgroundColor:t=>t.palette.mode==="dark"?t.palette.background.default:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:44,"&.Mui-expanded":{minHeight:44},"& .MuiAccordionSummary-content":{margin:"8px 0",flexDirection:"column","&.Mui-expanded":{margin:"8px 0"}}},Pf={px:t=>t.spacing(2),py:t=>t.spacing(1),display:"flex"},Cf={width:"50%"},If={"& .MuiListItemText-primary > span":{width:"50%",display:"inline-block","& > span":{fontSize:"0.6rem",marginLeft:"8px"}}},jf=()=>{const{t}=ze(),e=ba(),{AppTitle:a,db:{routeList:s,stopList:i,holidays:n,serviceDayMap:o}}=M.useContext(xa),{geolocation:r,energyMode:l,vibrateDuration:h}=M.useContext(Ai),[f,u]=M.useState(Of),{locations:c,status:d,result:g,resultIdx:v}=f,m=M.useRef(null),p=()=>{m.current&&(m.current.terminate(),m.current=null)},_=M.useCallback((P,L)=>{const V=P.reduce((b,O)=>b.concat(...O.map(R=>[`${R.routeId}/${R.on}`,`${R.routeId}/${R.off}`])),[]).filter((b,O,R)=>R.indexOf(b)===O);Promise.all(V.map(b=>{const[O,R]=b.split("/");return navigator.onLine?zs({...s[O],seq:parseInt(R,10),co:Object.keys(s[O].stops),language:e,stopList:i,serviceDayMap:o,holidays:n}).then(T=>T.filter(N=>N.eta)):new Promise(T=>T([]))})).then(b=>V.filter((O,R)=>!navigator.onLine||b[R].length&&b[R].reduce((T,N)=>!!(T||N.eta),!1))).then(b=>{u(O=>({...O,result:[...O.result,...P.filter(R=>R.reduce((T,N)=>T&&(b.indexOf(`${N.routeId}/${N.on}`)!==-1||b.indexOf(`${N.routeId}/${N.off}`)!==-1),!0)).map(R=>{let T=L;return R.map(N=>{const H=Object.values(s[N.routeId].stops).sort((U,Y)=>Y.length-U.length)[0];let z=-1,W=1e5;for(let U=N.on;U<N.off;++U){let Y=Hs(i[H[U]].location,T);Y<W&&(z=U,W=Y)}return T=i[H[N.off]].location,{...N,on:z}})}).map(R=>[R,R.reduce((T,N)=>T+N.off-N.on,0)]).sort((R,T)=>R[1]-T[1]).map(R=>R[0])]}))})},[n,e,s,o,i]);M.useEffect(()=>{Ws({title:t("點對點路線搜尋")+" - "+t(a),description:t("route-search-page-description"),lang:e})},[e,t,a]),M.useEffect(()=>{d==="rendering"&&u(P=>({...P,status:"ready"}))},[d,g]),M.useEffect(()=>{if(d==="waiting"&&c.end&&window.Worker){p();const P=c.start?c.start.location:r.current;m.current=new Worker("/search-worker.js"),m.current.postMessage({routeList:s,stopList:i,start:P,end:c.end.location,maxDepth:2}),m.current.onmessage=L=>{if(L.data.type==="done"){p(),u(V=>({...V,status:L.data.count?"rendering":"ready"}));return}_(L.data.value.sort((V,b)=>V.length-b.length),P)}}return()=>{p()}},[d,c,r,s,i,_]);const y=M.useCallback(P=>{u(L=>({...L,locations:{...L.locations,start:P},status:"waiting",resultIdx:{resultIdx:0,stopIdx:[0,0]},result:[]}))},[]),E=M.useCallback(P=>{u(L=>({...L,locations:{...L.locations,end:P},status:P?"waiting":L.status,resultIdx:{resultIdx:0,stopIdx:[0,0]},result:[]}))},[]),w=M.useCallback(P=>{Xs(h),setTimeout(()=>{u(L=>({...L,resultIdx:{resultIdx:P,stopIdx:[0,0]}}))},0)},[h]),x=M.useCallback((P,L)=>{const V=g[v.resultIdx].map(b=>b.routeId).indexOf(P);u(b=>{const O=[...b.resultIdx.stopIdx];return O[V]=L,{...b,resultIdx:{...b.resultIdx,stopIdx:O}}})},[g,v]),C=M.useCallback(()=>{u(P=>({...P,locations:{start:P.locations.end,end:P.locations.start},status:"waiting",resultIdx:{resultIdx:0,stopIdx:[0,0]},result:[]}))},[]),I=M.useCallback(P=>{u(L=>{const{start:V,end:b}=L.locations;if(V&&b)return L;const O=V?"end":"start";return{...L,locations:{...L.locations,[O]:{location:P,label:`${P.lat.toFixed(6)}, ${P.lng.toFixed(6)}`}},status:"waiting",resultIdx:{resultIdx:0,stopIdx:[0,0]},result:[]}})},[]);return $.jsxs(Zs,{sx:Af,square:!0,elevation:0,children:[l?null:$.jsx(Sf,{start:c.start?c.start.location:r.current,end:c.end?c.end.location:null,routes:g[v.resultIdx],stopIdx:v.stopIdx,onMarkerClick:x,onMapClick:I}),$.jsxs(ie,{sx:Rf,children:[$.jsxs(ie,{sx:Nf,children:[$.jsx(Gi,{value:c.start,placeholder:t("你的位置"),onChange:y,stopList:i}),$.jsx(Gi,{value:c.end,placeholder:t("目的地"),onChange:E,stopList:i})]}),$.jsx(Qs,{sx:Lf,onClick:C,children:$.jsx(un,{})})]}),$.jsx(ie,{sx:l?Df:Tf,children:c.end?"waiting|rendering".includes(d)&&g.length===0?$.jsx(hn,{}):"ready|waiting|rendering".includes(d)&&g.length?g.map((P,L)=>$.jsx(xf,{routes:P,idx:L,handleRouteClick:w,expanded:L===v.resultIdx,stopIdx:L===v.resultIdx?v.stopIdx:null},`search-result-${L}`)):$.jsx($.Fragment,{children:t("找不到合適的巴士路線")}):$.jsx(Gf,{})})]})},Gf=()=>{const{t}=ze();return $.jsxs(ie,{sx:kf,children:[$.jsx(Nt,{variant:"h5",children:t("Route Search header")}),$.jsx(Ks,{}),$.jsx(Nt,{variant:"subtitle1",children:t("Route Search description")}),$.jsx("br",{}),$.jsx(Nt,{variant:"body2",children:t("Route Search constraint")}),$.jsxs(Nt,{variant:"body2",children:["1. ",t("Route Search caption 1")]}),$.jsxs(Nt,{variant:"body2",children:["2. ",t("Route Search caption 2")]}),$.jsxs(Nt,{variant:"body2",children:["3. ",t("Route Search caption 3")]})]})},Of={locations:{start:null,end:null},status:"ready",result:[],resultIdx:{resultIdx:0,stopIdx:[0,0]}},Af={background:t=>t.palette.mode==="dark"?t.palette.background.default:"white",overflowY:"hidden",textAlign:"left",width:"100%"},Rf={display:"flex",flexDirection:"row",marginTop:"2%",padding:"0% 2%"},Nf={display:"flex",flexDirection:"column",width:"100%"},Lf={"min-width":"24px"},Tf={overflowY:"scroll",height:"calc(100% - 30vh - 76px)"},Df={overflowY:"scroll",height:"calc(100% - 76px)"},kf={textAlign:"left",marginTop:"5%",padding:"5%"};export{jf as default};
